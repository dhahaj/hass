{"version":3,"sources":["webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/common/dom/setup-leaflet-map.js","webpack:///./src/panels/map/ha-entity-marker.js","webpack:///./src/panels/lovelace/common/compute-unused-entities.js","webpack:///./src/panels/lovelace/common/compute-card-size.js","webpack:///./src/panels/lovelace/cards/hui-conditional-card.js","webpack:///./src/panels/lovelace/components/hui-entities-toggle.js","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entities.js","webpack:///./src/panels/lovelace/components/hui-generic-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-climate-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-cover-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-group-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-input-number-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-input-select-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-input-text-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-lock-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-scene-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-script-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-text-entity-row.js","webpack:///./src/panels/lovelace/common/create-error-card-config.js","webpack:///./src/panels/lovelace/entity-rows/hui-timer-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-toggle-entity-row.js","webpack:///./src/panels/lovelace/special-rows/hui-call-service-row.js","webpack:///./src/panels/lovelace/common/call-service.js","webpack:///./src/panels/lovelace/special-rows/hui-divider-row.js","webpack:///./src/panels/lovelace/special-rows/hui-weblink-row.js","webpack:///./src/panels/lovelace/common/create-row-element.js","webpack:///./src/panels/lovelace/common/process-config-entities.js","webpack:///./src/common/entity/valid_entity_id.js","webpack:///./src/panels/lovelace/common/entity/toggle-entity.js","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entity.js","webpack:///./src/panels/lovelace/cards/hui-entities-card.js","webpack:///./src/panels/lovelace/cards/hui-entity-filter-card.js","webpack:///./src/panels/lovelace/cards/hui-error-card.js","webpack:///./src/panels/lovelace/cards/hui-glance-card.js","webpack:///./src/panels/lovelace/cards/hui-history-graph-card.js","webpack:///./src/panels/lovelace/cards/hui-horizontal-stack-card.js","webpack:///./src/panels/lovelace/cards/hui-iframe-card.js","webpack:///./src/common/util/debounce.js","webpack:///./src/panels/lovelace/cards/hui-map-card.js","webpack:///./src/panels/lovelace/cards/hui-markdown-card.js","webpack:///./src/panels/lovelace/cards/hui-legacy-wrapper-card.js","webpack:///./src/panels/lovelace/cards/hui-media-control-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-card.js","webpack:///./src/panels/lovelace/mixins/element-click-mixin.js","webpack:///./src/panels/lovelace/elements/hui-icon-element.js","webpack:///./src/panels/lovelace/components/hui-image.js","webpack:///./src/panels/lovelace/elements/hui-image-element.js","webpack:///./src/panels/lovelace/elements/hui-service-button-element.js","webpack:///./src/panels/lovelace/elements/hui-state-badge-element.js","webpack:///./src/panels/lovelace/elements/hui-state-icon-element.js","webpack:///./src/panels/lovelace/elements/hui-state-label-element.js","webpack:///./src/panels/lovelace/common/create-hui-element.js","webpack:///./src/panels/lovelace/cards/hui-picture-elements-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-entity-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-glance-card.js","webpack:///./src/panels/lovelace/cards/hui-plant-status-card.js","webpack:///./src/panels/lovelace/cards/hui-vertical-stack-card.js","webpack:///./src/panels/lovelace/cards/hui-weather-forecast-card.js","webpack:///./src/panels/lovelace/common/create-card-element.js","webpack:///./src/panels/lovelace/hui-unused-entities.js","webpack:///./src/panels/lovelace/hui-view.js","webpack:///./src/panels/lovelace/hui-root.js","webpack:///./src/common/dom/scroll-to-target.js","webpack:///./src/panels/lovelace/ha-panel-lovelace.js","webpack:///./src/common/dom/load_resource.js"],"names":["customElements","define","Object","_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_3__","a","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_1__","template","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_0__","properties","hass","type","progress","Boolean","value","domain","String","service","serviceData","buttonTapped","this","el","eventData","callService","then","$","actionSuccess","success","actionError","fire","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_2__","disabled","tempClass","className","classList","container","add","setTimeout","remove","ready","super","addEventListener","ev","stopPropagation","computeDisabled","setupLeafletMap","mapElement","map","leaflet__WEBPACK_IMPORTED_MODULE_0___default","style","document","createElement","setAttribute","parentNode","appendChild","setView","tileLayer","Browser","retina","attribution","subdomains","minZoom","maxZoom","addTo","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_1__","entityId","entityName","entityPicture","badgeTap","EXCLUDED_DOMAINS","entities","computeCardSize","element","getCardSize","polymer_element","html_tag","observer","_config","_buildConfig","setConfig","config","card","Array","isArray","conditions","every","c","entity","state","state_not","Error","root","lastChild","removeChild","createCardElement","_hassChanged","visible","states","toggle","_toggleEntities","computed","_computeToggleEntities","entityIds","filter","common_const","e","has","split","_computeIsChecked","some","_callService","turnOn","target","checked","domainsToCall","forEach","h","includes","stateDomain","compute_domain","serviceDomain","push","keys","entity_id","_stateObj","_equals","b","_computeStateObj","_computeName","name","stateObj","compute_state_name","_entityObj","_computeEntityObj","cover_model","localize_mixin","_canToggle","_computeCanToggle","_computeState","compute_state_display","localize","legacy_class","iron_resizable_behavior","_min","Number","_max","_step","_value","ResizeObserver","entries","_hiddenState","observe","input_number_card","attributes","mode","sliderwidth","shadowRoot","querySelector","offsetWidth","stateElement","display","_stateObjChanged","oldStateObj","setProperties","min","max","step","_selectedValueChanged","events_mixin","_selected","_computeSelected","options","indexOf","_selectedChanged","option","_stopPropagation","_computeButtonTitle","createErrorConfig","error","origConfig","_timeRemaining","disconnectedCallback","_clearInterval","_startInterval","_updateRemaining","clearInterval","_calculateRemaining","setInterval","timer_time_remaining","_computeDisplay","time","seconds_to_duration","icon","action_name","service_data","assign","_createDivider","height","background-color","prop","setProperty","url","CUSTOM_TYPE_PREFIX","SPECIAL_TYPES","Set","DOMAIN_TO_ELEMENT_TYPE","automation","climate","cover","fan","group","input_boolean","input_number","input_select","input_text","light","lock","scene","script","timer","switch","vacuum","_createElement","tag","err","console","_createErrorElement","message","createRowElement","startsWith","substr","length","get","whenDefined","fire_event","processConfigEntities","entityConf","index","test","toggleEntity","constructor","_elements","_showHeaderToggle","show","_showHeader","title","show_header_toggle","_rows","item","row","_filterEntities","items","state_filter","_configEntities","_element","_filterRawConfig","_updateCardConfig","tagName","entitiesList","filterState","show_empty","isPanel","_toStr","obj","JSON","stringify","updateStyles","--glance-column-width","column_width","_showEntity","_showInfo","info","_handleClick","model","tap_action","_names","_entities","_stateHistory","_stateHistoryLoading","_cacheConfig","cacheKey","sort","join","hoursToShow","hours_to_show","refresh","refresh_interval","size","elSize","cards","elements","paddingTop","aspect_ratio","offsetHeight","leaflet_src","__webpack_require__","leaflet_src_default","n","setup_leaflet_map","compute_state_domain","debounce","func","wait","immediate","timeout","args","context","callNow","clearTimeout","apply","Icon","Default","imagePath","reflectToAttribute","_debouncedResizeListener","_resetMap","bind","ar","Math","floor","connectedCallback","_resizeObserver","window","_map","_drawEntities","_fitMap","unobserve","removeEventListener","invalidateSize","_mapItems","LatLng","core","latitude","longitude","bounds","latLngBounds","getLatLng","fitBounds","pad","marker","mapItems","passive","radius","entity_picture","gps_accuracy","gpsAccuracy","markerIcon","iconHTML","outerHTML","divIcon","html","iconSize","interactive","circle","color","part","noTitle","content","_computeNoTitle","hui_legacy_wrapper_card_LegacyWrapperCard","HTMLElement","_tag","toUpperCase","_domain","_ensureElement","navigate_mixin","image","_computeClickable","navigation_path","_cardClicked","navigate","element_click_mixin","mixin","superClass","handleClick","tapAction","computeTooltip","stateName","tooltip","stateImage","cameraImage","stateFilter","_imageSrc","observers","_updateCameraImageSrc","_configChanged","_onImageError","brokenImage","_lastImageHeight","_onImageLoad","newState","_currentState","_updateStateImage","_updateStateFilter","_imageFallback","stateImg","isOff","[object Object]","content_type","contentType","callWS","_service","_updateBadge","_badge","_computeStateDisplay","ELEMENT_TYPES","create_hui_element_createElement","create_hui_element_createErrorElement","img","src","_name","_state","_entityDomain","state_image","camera_image","_oldState","stateLabel","available","_showNameAndState","show_name","show_state","_showName","_showState","_getCameraImage","STATES_OFF","_entitiesDialog","_entitiesToggle","dialog","force_dialog","_computeVisible","collection","_computeIcon","state_icon","_computeButtonClass","_computeTooltip","_computeImageClass","_openDialog","_handleImageClick","totalSize","CARD_TYPES","create_card_element_CUSTOM_TYPE_PREFIX","create_card_element_createElement","create_card_element_createErrorElement","usedEntities","addEntityId","views","view","addEntities","computeUsedEntities","excluded_entities","secondary_info","columns","_cards","_badges","_createBadges","badges","_createCards","cardConfig","columnEntityCount","i","cardSize","minIndex","val","column","columnEl","apply_themes_on_element","themes","theme","badge","CSS_CACHE","JS_CACHE","narrow","showMenu","_curView","route","routeData","_debouncedConfigChanged","_selectView","_routeChanged","path","prefix","id","parseInt","_computeViewId","_computeTitle","_computeTabsHidden","_computeTabTitle","_handleRefresh","_handleUnusedEntities","_deselect","selected","_handleHelp","open","_handleViewSelected","detail","scroller","animationId","startTime","currentScrollTop","deltaScrollTop","layout","header","scrollTarget","random","Date","now","scrollTop","_currentAnimationId","updateFrame","t","elapsedTime","requestAnimationFrame","call","viewIndex","background","viewConfig","panel","_loadResources","resources","_columnsChanged","resource","load_resource","Promise","resolve","importHref","warn","_columns","_errorMsg","_fetchConfig","_updateColumns","mqls","width","mql","matchMedia","addListener","matchColumns","reduce","cols","matches","conf","_equal","_load","reject","attr","parent","onload","onerror","async","rel","d","__webpack_exports__","loadModule","loadCSS","loadJS"],"mappings":"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","file":"eb618cf11a4eca6918ea.chunk.js","sourcesContent":["import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-progress-button.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-progress-button id=\"progress\" progress=\"[[progress]]\" on-click=\"buttonTapped\"><slot></slot></ha-progress-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass.callService(this.domain, this.service, this.serviceData)\n      .then(function () {\n        el.progress = false;\n        el.$.progress.actionSuccess();\n        eventData.success = true;\n      }, function () {\n        el.progress = false;\n        el.$.progress.actionError();\n        eventData.success = false;\n      }).then(function () {\n        el.fire('hass-service-called', eventData);\n      });\n  }\n}\n\ncustomElements.define('ha-call-service-button', HaCallServiceButton);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-spinner/paper-spinner.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      .container {\n        position: relative;\n        display: inline-block;\n      }\n\n      paper-button {\n        transition: all 1s;\n      }\n\n      .success paper-button {\n        color: white;\n        background-color: var(--google-green-500);\n        transition: none;\n      }\n\n      .error paper-button {\n        color: white;\n        background-color: var(--google-red-500);\n        transition: none;\n      }\n\n      paper-button[disabled] {\n        color: #c8c8c8;\n      }\n\n      .progress {\n        @apply --layout;\n        @apply --layout-center-center;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n    </style>\n    <div class=\"container\" id=\"container\">\n      <paper-button id=\"button\" disabled=\"[[computeDisabled(disabled, progress)]]\" on-click=\"buttonTapped\">\n        <slot></slot>\n      </paper-button>\n      <template is=\"dom-if\" if=\"[[progress]]\">\n        <div class=\"progress\">\n          <paper-spinner active=\"\"></paper-spinner>\n        </div>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass('success');\n  }\n\n  actionError() {\n    this.tempClass('error');\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define('ha-progress-button', HaProgressButton);\n","import Leaflet from 'leaflet';\n\n// Sets up a Leaflet map on the provided DOM element\nexport default function setupLeafletMap(mapElement) {\n  const map = Leaflet.map(mapElement);\n  const style = document.createElement('link');\n  style.setAttribute('href', '/static/images/leaflet/leaflet.css');\n  style.setAttribute('rel', 'stylesheet');\n  mapElement.parentNode.appendChild(style);\n  map.setView([51.505, -0.09], 13);\n  Leaflet.tileLayer(\n    `https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}${Leaflet.Browser.retina ? '@2x.png' : '.png'}`,\n    {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n      subdomains: 'abcd',\n      minZoom: 0,\n      maxZoom: 20,\n    }\n  ).addTo(map);\n\n  return map;\n}\n","import '@polymer/iron-image/iron-image.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaEntityMarker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-positioning\"></style>\n    <style>\n    .marker {\n      vertical-align: top;\n      position: relative;\n      display: block;\n      margin: 0 auto;\n      width: 2.5em;\n      text-align: center;\n      height: 2.5em;\n      line-height: 2.5em;\n      font-size: 1.5em;\n      border-radius: 50%;\n      border: 0.1em solid var(--ha-marker-color, var(--default-primary-color));\n      color: rgb(76, 76, 76);\n      background-color: white;\n    }\n    iron-image {\n      border-radius: 50%;\n    }\n    </style>\n\n    <div class=\"marker\">\n      <template is=\"dom-if\" if=\"[[entityName]]\">[[entityName]]</template>\n      <template is=\"dom-if\" if=\"[[entityPicture]]\">\n        <iron-image sizing=\"cover\" class=\"fit\" src=\"[[entityPicture]]\"></iron-image>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entityId: {\n        type: String,\n        value: '',\n      },\n\n      entityName: {\n        type: String,\n        value: null,\n      },\n\n      entityPicture: {\n        type: String,\n        value: null,\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.badgeTap(ev));\n  }\n\n  badgeTap(ev) {\n    ev.stopPropagation();\n    if (this.entityId) {\n      this.fire('hass-more-info', { entityId: this.entityId });\n    }\n  }\n}\n\ncustomElements.define('ha-entity-marker', HaEntityMarker);\n","const EXCLUDED_DOMAINS = [\n  'zone'\n];\n\nfunction computeUsedEntities(config) {\n  const entities = new Set();\n\n  function addEntityId(entity) {\n    if (typeof entity === 'string') {\n      entities.add(entity);\n    } else if (entity.entity) {\n      entities.add(entity.entity);\n    }\n  }\n\n  function addEntities(obj) {\n    if (obj.entity) addEntityId(obj.entity);\n    if (obj.entities) obj.entities.forEach(entity => addEntityId(entity));\n    if (obj.card) addEntities(obj.card);\n    if (obj.cards) obj.cards.forEach(card => addEntities(card));\n  }\n\n  config.views.forEach(view => addEntities(view));\n  return entities;\n}\n\nexport default function computeUnusedEntities(hass, config) {\n  const usedEntities = computeUsedEntities(config);\n  return Object.keys(hass.states).filter(entity => !usedEntities.has(entity) &&\n    !(config.excluded_entities && config.excluded_entities.includes(entity)) &&\n    !EXCLUDED_DOMAINS.includes(entity.split('.', 1)[0])).sort();\n}\n","export default function computeCardSize(element) {\n  return typeof element.getCardSize === 'function' ? element.getCardSize() : 1;\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiConditionalCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .hidden {\n          display: none;\n        }\n      </style>\n      <div id=\"card\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _config: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  setConfig(config) {\n    if (!config || !config.card || !Array.isArray(config.conditions) ||\n        !config.conditions.every(c => c.entity && (c.state || c.state_not))) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    const root = this.$.card;\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const element = createCardElement(config.card);\n    element.hass = this.hass;\n    root.appendChild(element);\n    if (this.hass) this._hassChanged(this.hass);\n  }\n\n  getCardSize() {\n    const el = this.$.card && this.$.card.lastChild;\n    return el ? computeCardSize(el) : 1;\n  }\n\n  _hassChanged(hass) {\n    const root = this.$.card;\n    if (!root || !root.lastChild) return;\n\n    root.lastChild.hass = hass;\n\n    const conditions = this._config.conditions;\n    const visible = conditions.every((c) => {\n      if (c.entity in hass.states) {\n        if (c.state) return hass.states[c.entity].state === c.state;\n        return hass.states[c.entity].state !== c.state_not;\n      }\n      return false;\n    });\n    root.classList.toggle('hidden', !visible);\n  }\n}\ncustomElements.define('hui-conditional-card', HuiConditionalCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-toggle-button/paper-toggle-button.js';\n\nimport { DOMAINS_TOGGLE } from '../../../common/const.js';\nimport turnOnOffEntities from '../common/entity/turn-on-off-entities.js';\n\nclass HuiEntitiesToggle extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        width: 38px;\n        display: block;\n      }\n      paper-toggle-button {\n        cursor: pointer;\n        --paper-toggle-button-label-spacing: 0;\n        padding: 13px 5px;\n        margin: -4px -5px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[_toggleEntities.length]]\">\n      <paper-toggle-button checked=\"[[_computeIsChecked(hass, _toggleEntities)]]\" on-change=\"_callService\"></paper-toggle-button>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      entities: Array,\n      _toggleEntities: {\n        type: Array,\n        computed: '_computeToggleEntities(hass, entities)'\n      }\n    };\n  }\n\n  _computeToggleEntities(hass, entityIds) {\n    return entityIds.filter(entityId => (entityId in hass.states &&\n      DOMAINS_TOGGLE.has(entityId.split('.', 1)[0])));\n  }\n\n  _computeIsChecked(hass, entityIds) {\n    return entityIds.some(entityId => hass.states[entityId].state === 'on');\n  }\n\n  _callService(ev) {\n    const turnOn = ev.target.checked;\n    turnOnOffEntities(this.hass, this._toggleEntities, turnOn);\n  }\n}\n\ncustomElements.define('hui-entities-toggle', HuiEntitiesToggle);\n","import { STATES_OFF } from '../../../../common/const.js';\nimport computeDomain from '../../../../common/entity/compute_domain.js';\n\nexport default function turnOnOffEntities(hass, entityIds, turnOn = true) {\n  const domainsToCall = {};\n  entityIds.forEach((entityId) => {\n    if ((STATES_OFF.includes(hass.states[entityId].state)) === turnOn) {\n      const stateDomain = computeDomain(entityId);\n      const serviceDomain = ['cover', 'lock'].includes(stateDomain) ?\n        stateDomain : 'homeassistant';\n\n      if (!(serviceDomain in domainsToCall)) domainsToCall[serviceDomain] = [];\n      domainsToCall[serviceDomain].push(entityId);\n    }\n  });\n\n  Object.keys(domainsToCall).forEach((domain) => {\n    let service;\n    switch (domain) {\n      case 'lock':\n        service = turnOn ? 'unlock' : 'lock';\n        break;\n      case 'cover':\n        service = turnOn ? 'open_cover' : 'close_cover';\n        break;\n      default:\n        service = turnOn ? 'turn_on' : 'turn_off';\n    }\n\n    const entities = domainsToCall[domain];\n    hass.callService(domain, service, { entity_id: entities });\n  });\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/entity/state-badge.js';\nimport '../../../components/ha-relative-time.js';\nimport '../../../components/ha-icon.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n\nclass HuiGenericEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n        }\n        .flex {\n          flex: 1;\n          overflow: hidden;\n          margin-left: 16px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .info,\n        .info > * {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        .flex ::slotted(*) {\n          margin-left: 8px;\n        }\n        .secondary,\n        ha-relative-time {\n          display: block;\n          color: var(--secondary-text-color);\n        }\n        ha-icon {\n          padding: 8px;\n          color: var(--paper-item-icon-color);\n        }\n        .not-found {\n          flex: 1;\n          background-color: yellow;\n          padding: 8px;\n        }\n      </style>\n      <template is=\"dom-if\" if=\"[[_stateObj]]\">\n        <template is=\"dom-if\" if=\"[[!config.icon]]\">\n          <state-badge state-obj=\"[[_stateObj]]\"></state-badge>\n        </template>\n        <template is=\"dom-if\" if=\"[[config.icon]]\">\n          <ha-icon icon=\"[[config.icon]]\"></ha-icon>\n        </template>\n        <div class=\"flex\">\n          <div class=\"info\">\n            [[_computeName(config.name, _stateObj)]]\n            <template is=\"dom-if\" if=\"[[config.secondary_info]]\">\n              <template is=\"dom-if\" if=\"[[_equals(config.secondary_info, 'entity-id')]]\">\n                <div class=\"secondary\">\n                  [[_stateObj.entity_id]]\n                </div>\n              </template>\n              <template is=\"dom-if\" if=\"[[_equals(config.secondary_info, 'last-changed')]]\">\n                <ha-relative-time\n                  hass=\"[[hass]]\"\n                  datetime=\"[[_stateObj.last_changed]]\"\n                ></ha-relative-time>\n              </template>\n            </template>\n          </div>\n          <slot></slot>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[!_stateObj]]\">\n        <div class=\"not-found\">\n          Entity not available: [[config.entity]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, config.entity)'\n      }\n    };\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeName(name, stateObj) {\n    return name || computeStateName(stateObj);\n  }\n}\ncustomElements.define('hui-generic-entity-row', HuiGenericEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-climate-state.js';\nimport '../components/hui-generic-entity-row.js';\n\nclass HuiClimateEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <ha-climate-state\n          hass=\"[[hass]]\"\n          state-obj=\"[[_stateObj]]\"\n        ></ha-climate-state>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-climate-entity-row', HuiClimateEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/ha-cover-controls.js';\nimport '../../../components/ha-cover-tilt-controls.js';\nimport CoverEntity from '../../../util/cover-model.js';\n\nclass HuiCoverEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-cover-controls,\n        ha-cover-tilt-controls {\n          margin-right: -.57em;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <template is=\"dom-if\" if=\"[[!_entityObj.isTiltOnly]]\">\n          <ha-cover-controls hass=\"[[hass]]\" state-obj=\"[[_stateObj]]\"></ha-cover-controls>\n        </template>\n        <template is=\"dom-if\" if=\"[[_entityObj.isTiltOnly]]\">\n          <ha-cover-tilt-controls hass=\"[[hass]]\" state-obj=\"[[_stateObj]]\"></ha-cover-tilt-controls>\n        </template>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _entityObj: {\n        type: Object,\n        computed: '_computeEntityObj(hass, _stateObj)'\n      },\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeEntityObj(hass, stateObj) {\n    return stateObj ? new CoverEntity(hass, stateObj) : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-cover-entity-row', HuiCoverEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/entity/ha-entity-toggle.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport { DOMAINS_TOGGLE } from '../../../common/const.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiGroupEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <template is=\"dom-if\" if=\"[[_canToggle]]\">\n          <ha-entity-toggle\n            hass=\"[[hass]]\"\n            state-obj=\"[[_stateObj]]\"\n          ></ha-entity-toggle>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_canToggle]]\">\n          <div>\n            [[_computeState(_stateObj)]]\n          </div>\n        </template>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _canToggle: {\n        type: Boolean,\n        computed: '_computeCanToggle(_stateObj.attributes.entity_id)'\n      }\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeCanToggle(entityIds) {\n    return entityIds.some(entityId => DOMAINS_TOGGLE.has(entityId.split('.', 1)[0]));\n  }\n\n  _computeState(stateObj) {\n    return computeStateDisplay(this.localize, stateObj);\n  }\n}\ncustomElements.define('hui-group-entity-row', HuiGroupEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-slider/paper-slider.js';\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nclass HuiInputNumberEntityRow extends mixinBehaviors([IronResizableBehavior], PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .flex {\n          display: flex;\n          align-items: center;\n        }\n        .state {\n          min-width: 45px;\n          text-align: center;\n        }\n        paper-input {\n          text-align: right;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n        id=\"input_number_card\"\n      >\n        <div>\n          <template is=\"dom-if\" if=\"[[_equals(_stateObj.attributes.mode, 'slider')]]\">\n            <div class=\"flex\">\n              <paper-slider\n                min=\"[[_min]]\"\n                max=\"[[_max]]\"\n                value=\"{{_value}}\"\n                step=\"[[_step]]\"\n                pin\n                on-change=\"_selectedValueChanged\"\n                ignore-bar-touch\n              ></paper-slider>\n              <div class=\"state\">[[_value]] [[_stateObj.attributes.unit_of_measurement]]</div>\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[_equals(_stateObj.attributes.mode, 'box')]]\">\n            <paper-input\n              no-label-float\n              auto-validate\n              pattern=\"[0-9]+([\\\\.][0-9]+)?\"\n              step=\"[[_step]]\"\n              min=\"[[_min]]\"\n              max=\"[[_max]]\"\n              value=\"{{_value}}\"\n              type=\"number\"\n              on-change=\"_selectedValueChanged\"\n            ></paper-input>\n          </template>\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)',\n        observer: '_stateObjChanged'\n      },\n      _min: {\n        type: Number,\n        value: 0\n      },\n      _max: {\n        type: Number,\n        value: 100\n      },\n      _step: Number,\n      _value: Number\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (typeof ResizeObserver === 'function') {\n      const ro = new ResizeObserver((entries) => {\n        entries.forEach(() => {\n          this._hiddenState();\n        });\n      });\n      ro.observe(this.$.input_number_card);\n    } else {\n      this.addEventListener('iron-resize', this._hiddenState);\n    }\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _hiddenState() {\n    if (this._stateObj.attributes.mode !== 'slider') return;\n    const sliderwidth = this.shadowRoot.querySelector('paper-slider').offsetWidth;\n    const stateElement = this.shadowRoot.querySelector('.state');\n    if (sliderwidth < 100) {\n      stateElement.style.display = 'none';\n    } else if (sliderwidth >= 145) {\n      stateElement.style.display = 'inline';\n    }\n  }\n\n  _stateObjChanged(stateObj, oldStateObj) {\n    this.setProperties({\n      _min: Number(stateObj.attributes.min),\n      _max: Number(stateObj.attributes.max),\n      _step: Number(stateObj.attributes.step),\n      _value: Number(stateObj.state)\n    });\n    if (oldStateObj && stateObj.attributes.mode === 'slider' && oldStateObj.attributes.mode !== 'slider') {\n      this._hiddenState();\n    }\n  }\n\n  _selectedValueChanged() {\n    if (this._value === Number(this._stateObj.state)) return;\n\n    this.hass.callService('input_number', 'set_value', {\n      value: this._value,\n      entity_id: this._stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define('hui-input-number-entity-row', HuiInputNumberEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\n\nimport '../../../components/entity/state-badge.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HuiInputSelectEntityRow extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n        }\n        paper-dropdown-menu {\n          margin-left: 16px;\n          flex: 1;\n        }\n        .not-found {\n          flex: 1;\n          background-color: yellow;\n          padding: 8px;\n        }\n      </style>\n      <template is=\"dom-if\" if=\"[[_stateObj]]\">\n        <state-badge state-obj=\"[[_stateObj]]\"></state-badge>\n        <paper-dropdown-menu on-click=\"_stopPropagation\" selected-item-label=\"{{_selected}}\" label=\"[[_computeName(_config.name, _stateObj)]]\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"[[_computeSelected(_stateObj)]]\">\n            <template is=\"dom-repeat\" items=\"[[_stateObj.attributes.options]]\">\n              <paper-item>[[item]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </template>\n      <template is=\"dom-if\" if=\"[[!_stateObj]]\">\n        <div class=\"not-found\">\n          Entity not available: [[_config.entity]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _selected: {\n        type: String,\n        observer: '_selectedChanged',\n      },\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeName(name, stateObj) {\n    return name || computeStateName(stateObj);\n  }\n\n  _computeSelected(stateObj) {\n    return stateObj.attributes.options.indexOf(stateObj.state);\n  }\n\n  _selectedChanged(option) {\n    // Selected Option will transition to '' before transitioning to new value\n    if (option === '' || option === this._stateObj.state) {\n      return;\n    }\n    this.hass.callService('input_select', 'select_option', {\n      option: option,\n      entity_id: this._stateObj.entity_id,\n    });\n  }\n\n  _stopPropagation(ev) {\n    ev.stopPropagation();\n  }\n}\ncustomElements.define('hui-input-select-entity-row', HuiInputSelectEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-input/paper-input.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nclass HuiInputTextEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <paper-input\n          no-label-float\n          minlength=\"[[_stateObj.attributes.min]]\"\n          maxlength=\"[[_stateObj.attributes.max]]\"\n          value=\"{{_value}}\"\n          auto-validate=\"[[_stateObj.attributes.pattern]]\"\n          pattern=\"[[_stateObj.attributes.pattern]]\"\n          type=\"[[_stateObj.attributes.mode]]\"\n          on-change=\"_selectedValueChanged\"\n          placeholder=\"(empty value)\"\n        ></paper-input>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)',\n        observer: '_stateObjChanged',\n      },\n      _value: String\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _stateObjChanged(stateObj) {\n    this._value = stateObj.state;\n  }\n\n  _selectedValueChanged() {\n    if (this._value === this._stateObj.state) {\n      return;\n    }\n    this.hass.callService('input_text', 'set_value', {\n      value: this._value,\n      entity_id: this._stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define('hui-input-text-entity-row', HuiInputTextEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiLockEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin-right: -.57em;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <paper-button on-click=\"_callService\">\n          [[_computeButtonTitle(_stateObj.state)]]\n        </paper-button>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeButtonTitle(state) {\n    return state === 'locked' ?\n      this.localize('ui.card.lock.unlock') : this.localize('ui.card.lock.lock');\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    const stateObj = this._stateObj;\n    this.hass.callService('lock', stateObj.state === 'locked' ?\n      'unlock' : 'lock', { entity_id: stateObj.entity_id });\n  }\n}\ncustomElements.define('hui-lock-entity-row', HuiLockEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiSceneEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin-right: -.57em;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <paper-button on-click=\"_callService\">\n          [[localize('ui.card.scene.activate')]]\n        </paper-button>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    this.hass.callService('scene', 'turn_on', { entity_id: this._config.entity });\n  }\n}\ncustomElements.define('hui-scene-entity-row', HuiSceneEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/entity/ha-entity-toggle.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiScriptEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin-right: -.57em;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <template is=\"dom-if\" if=\"[[_stateObj.attributes.can_cancel]]\">\n          <ha-entity-toggle state-obj=\"[[_stateObj]]\" hass=\"[[hass]]\"></ha-entity-toggle>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_stateObj.attributes.can_cancel]]\">\n          <paper-button on-click=\"_callService\">[[localize('ui.card.script.execute')]]</paper-button>\n        </template>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    this.hass.callService('script', 'turn_on', { entity_id: this._config.entity });\n  }\n}\ncustomElements.define('hui-script-entity-row', HuiScriptEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiTextEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        div {\n          text-align: right;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <div>\n          [[_computeState(_stateObj)]]\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeState(stateObj) {\n    return computeStateDisplay(this.localize, stateObj);\n  }\n}\ncustomElements.define('hui-text-entity-row', HuiTextEntityRow);\n","export default function createErrorConfig(error, origConfig) {\n  return {\n    type: 'error',\n    error,\n    origConfig,\n  };\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport timerTimeRemaining from '../../../common/entity/timer_time_remaining.js';\nimport secondsToDuration from '../../../common/datetime/seconds_to_duration.js';\n\nclass HuiTimerEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <div>\n          [[_computeDisplay(_stateObj, _timeRemaining)]]\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)',\n        observer: '_stateObjChanged'\n      },\n      _timeRemaining: Number\n    };\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._clearInterval();\n  }\n\n  _stateObjChanged(stateObj) {\n    if (stateObj) {\n      this._startInterval(stateObj);\n    } else {\n      this._clearInterval();\n    }\n  }\n\n  _clearInterval() {\n    if (this._updateRemaining) {\n      clearInterval(this._updateRemaining);\n      this._updateRemaining = null;\n    }\n  }\n\n  _startInterval(stateObj) {\n    this._clearInterval();\n    this._calculateRemaining(stateObj);\n\n    if (stateObj.state === 'active') {\n      this._updateRemaining = setInterval(() => this._calculateRemaining(this._stateObj), 1000);\n    }\n  }\n\n  _calculateRemaining(stateObj) {\n    this._timeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  _computeDisplay(stateObj, time) {\n    if (stateObj.state === 'idle' || time === 0) return stateObj.state;\n\n    let display = secondsToDuration(time);\n\n    if (stateObj.state === 'paused') {\n      display += ' (paused)';\n    }\n\n    return display;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-timer-entity-row', HuiTimerEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/entity/ha-entity-toggle.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiToggleEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <template is=\"dom-if\" if=\"[[_canToggle]]\">\n          <ha-entity-toggle\n            hass=\"[[hass]]\"\n            state-obj=\"[[_stateObj]]\"\n          ></ha-entity-toggle>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_canToggle]]\">\n          <div>\n            [[_computeState(_stateObj)]]\n          </div>\n        </template>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _canToggle: {\n        type: Boolean,\n        computed: '_computeCanToggle(_stateObj.state)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeCanToggle(state) {\n    return state === 'on' || state === 'off';\n  }\n\n  _computeState(stateObj) {\n    return stateObj && computeStateDisplay(this.localize, stateObj);\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-toggle-entity-row', HuiToggleEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../../../components/ha-icon.js';\nimport callService from '../common/call-service.js';\n\nclass HuiCallServiceRow extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n        }\n        ha-icon {\n          padding: 8px;\n          color: var(--paper-item-icon-color);\n        }\n        .flex {\n          flex: 1;\n          overflow: hidden;\n          margin-left: 16px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .flex div {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin-right: -.57em;\n        }\n      </style>\n      <ha-icon icon=\"[[_config.icon]]\"></ha-icon>\n      <div class=\"flex\">\n        <div>\n          [[_config.name]]\n        </div>\n        <paper-button on-click=\"_callService\">[[_config.action_name]]</paper-button>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.icon || !config.name || !config.action_name ||\n        !config.service || !config.service_data) {\n      throw new Error('Error in card configuration.');\n    }\n    this._config = config;\n  }\n\n  _callService() {\n    callService(this._config, this.hass);\n  }\n}\ncustomElements.define('hui-call-service-row', HuiCallServiceRow);\n","export default function callService(config, hass) {\n  const entityId = config.entity;\n  const [domain, service] = config.service.split('.', 2);\n  const serviceData = Object.assign(\n    {}, { entity_id: entityId },\n    config.service_data\n  );\n  hass.callService(domain, service, serviceData);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiDividerRow extends PolymerElement {\n  static get template() {\n    return html``;\n  }\n\n  setConfig(config) {\n    if (!config) {\n      throw new Error('Error in card configuration.');\n    }\n    this._config = config;\n    this._createDivider();\n  }\n\n  ready() {\n    super.ready();\n    this._createDivider();\n  }\n\n  _createDivider() {\n    const root = this.shadowRoot;\n    if (root === null) return;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const style = this._config.style || {\n      height: '1px',\n      'background-color': 'var(--secondary-text-color)'\n    };\n\n    const el = document.createElement('div');\n    Object.keys(style).forEach((prop) => {\n      el.style.setProperty(prop, style[prop]);\n    });\n\n    root.appendChild(el);\n  }\n}\ncustomElements.define('hui-divider-row', HuiDividerRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-icon.js';\n\nclass HuiWeblinkRow extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        a {\n          display: flex;\n          align-items: center;\n          color: var(--primary-color);\n        }\n        ha-icon {\n          padding: 8px;\n          color: var(--paper-item-icon-color);\n        }\n        div {\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          margin-left: 16px;\n        }\n      </style>\n      <a href=\"[[_config.url]]\">\n        <ha-icon icon=\"[[_config.icon]]\"></ha-icon>\n        <div>\n          [[_config.name]]\n        </div>\n      </a>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.icon || !config.name || !config.url) {\n      throw new Error('Error in card configuration.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-weblink-row', HuiWeblinkRow);\n","import fireEvent from '../../../common/dom/fire_event.js';\n\nimport '../entity-rows/hui-climate-entity-row.js';\nimport '../entity-rows/hui-cover-entity-row.js';\nimport '../entity-rows/hui-group-entity-row.js';\nimport '../entity-rows/hui-input-number-entity-row.js';\nimport '../entity-rows/hui-input-select-entity-row.js';\nimport '../entity-rows/hui-input-text-entity-row.js';\nimport '../entity-rows/hui-lock-entity-row.js';\nimport '../entity-rows/hui-scene-entity-row.js';\nimport '../entity-rows/hui-script-entity-row.js';\nimport '../entity-rows/hui-text-entity-row.js';\nimport '../entity-rows/hui-timer-entity-row.js';\nimport '../entity-rows/hui-toggle-entity-row.js';\n\nimport '../special-rows/hui-call-service-row.js';\nimport '../special-rows/hui-divider-row.js';\nimport '../special-rows/hui-weblink-row.js';\n\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\nconst SPECIAL_TYPES = new Set([\n  'call-service',\n  'divider',\n  'weblink'\n]);\nconst DOMAIN_TO_ELEMENT_TYPE = {\n  automation: 'toggle',\n  climate: 'climate',\n  cover: 'cover',\n  fan: 'toggle',\n  group: 'group',\n  input_boolean: 'toggle',\n  input_number: 'input-number',\n  input_select: 'input-select',\n  input_text: 'input-text',\n  light: 'toggle',\n  lock: 'lock',\n  scene: 'scene',\n  script: 'script',\n  timer: 'timer',\n  switch: 'toggle',\n  vacuum: 'toggle'\n};\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    if ('setConfig' in element) element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createRowElement(config) {\n  let tag;\n\n  if (!config || typeof config !== 'object' || (!config.entity && !config.type)) {\n    return _createErrorElement('Invalid config given.', config);\n  }\n\n  const type = config.type || 'default';\n  if (SPECIAL_TYPES.has(type)) {\n    return _createElement(`hui-${type}-row`, config);\n  }\n\n  if (type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  const domain = config.entity.split('.', 1)[0];\n  tag = `hui-${DOMAIN_TO_ELEMENT_TYPE[domain] || 'text'}-entity-row`;\n\n  return _createElement(tag, config);\n}\n","// Parse array of entity objects from config\nimport isValidEntityId from '../../../common/entity/valid_entity_id.js';\n\nexport default function processConfigEntities(entities) {\n  if (!entities || !Array.isArray(entities)) {\n    throw new Error('Entities need to be an array');\n  }\n\n  return entities.map((entityConf, index) => {\n    if (typeof entityConf === 'object' && !Array.isArray(entityConf) && entityConf.type) {\n      return entityConf;\n    }\n\n    if (typeof entityConf === 'string') {\n      entityConf = { entity: entityConf };\n    } else if (typeof entityConf === 'object' && !Array.isArray(entityConf)) {\n      if (!entityConf.entity) {\n        throw new Error(`Entity object at position ${index} is missing entity field.`);\n      }\n    } else {\n      throw new Error(`Invalid entity specified at position ${index}.`);\n    }\n\n    if (!isValidEntityId(entityConf.entity)) {\n      throw new Error(`Invalid entity ID at position ${index}: ${entityConf.entity}`);\n    }\n\n    return entityConf;\n  });\n}\n","export default function validEntityId(entityId) {\n  return /^(\\w+)\\.(\\w+)$/.test(entityId);\n}\n","import { STATES_OFF } from '../../../../common/const.js';\nimport turnOnOffEntity from './turn-on-off-entity.js';\n\nexport default function toggleEntity(hass, entityId) {\n  const turnOn = STATES_OFF.includes(hass.states[entityId].state);\n  turnOnOffEntity(hass, entityId, turnOn);\n}\n","import computeDomain from '../../../../common/entity/compute_domain.js';\n\nexport default function turnOnOffEntity(hass, entityId, turnOn = true) {\n  const stateDomain = computeDomain(entityId);\n  const serviceDomain = stateDomain === 'group' ? 'homeassistant' : stateDomain;\n\n  let service;\n  switch (stateDomain) {\n    case 'lock':\n      service = turnOn ? 'unlock' : 'lock';\n      break;\n    case 'cover':\n      service = turnOn ? 'open_cover' : 'close_cover';\n      break;\n    default:\n      service = turnOn ? 'turn_on' : 'turn_off';\n  }\n\n  hass.callService(serviceDomain, service, { entity_id: entityId });\n}\n","import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-entities-toggle.js';\n\nimport createRowElement from '../common/create-row-element.js';\nimport computeDomain from '../../../common/entity/compute_domain.js';\nimport { DOMAINS_HIDE_MORE_INFO } from '../../../common/const.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HuiEntitiesCard extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      ha-card {\n        padding: 16px;\n      }\n      #states {\n        margin: -4px 0;\n      }\n      #states > div {\n        margin: 4px 0;\n      }\n      #states > div > * {\n        overflow: hidden;\n      }\n      .header {\n        @apply --paper-font-headline;\n        /* overwriting line-height +8 because entity-toggle can be 40px height,\n           compensating this with reduced padding */\n        line-height: 40px;\n        color: var(--primary-text-color);\n        padding: 4px 0 12px;\n        display: flex;\n        justify-content: space-between;\n      }\n      .header .name {\n        @apply --paper-font-common-nowrap;\n      }\n      .state-card-dialog {\n        cursor: pointer;\n      }\n    </style>\n\n    <ha-card>\n      <template is='dom-if' if='[[_showHeader(_config)]]'>\n        <div class='header'>\n          <div class=\"name\">[[_config.title]]</div>\n          <template is=\"dom-if\" if=\"[[_showHeaderToggle(_config.show_header_toggle)]]\">\n            <hui-entities-toggle hass=\"[[hass]]\" entities=\"[[_filterEntities(_config.entities)]]\"></hui-entities-toggle>\n          </template>\n        </div>\n      </template>\n      <div id=\"states\"></div>\n    </ha-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _config: Object\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    // +1 for the header\n    return 1 + (this._config ? this._config.entities.length : 0);\n  }\n\n  _showHeaderToggle(show) {\n    // If show is undefined, we treat it as true\n    return show !== false;\n  }\n\n  _showHeader(config) {\n    // Show header if either title or toggle configured to show in it\n    return config.title || config.show_header_toggle;\n  }\n\n  setConfig(config) {\n    this._config = config;\n    this._rows = config.entities.map(item => (typeof item === 'string' ? { entity: item } : item));\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const root = this.$.states;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    this._elements = [];\n\n    for (const row of this._rows) {\n      const entityId = row.entity;\n      const element = createRowElement(row);\n      if (entityId && !DOMAINS_HIDE_MORE_INFO.includes(computeDomain(entityId))) {\n        element.classList.add('state-card-dialog');\n        element.addEventListener('click', () => this.fire('hass-more-info', { entityId }));\n      }\n      element.hass = this.hass;\n      this._elements.push(element);\n      const container = document.createElement('div');\n      container.appendChild(element);\n      root.appendChild(container);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n\n  _filterEntities(items) {\n    return items.filter(item => (typeof item === 'string' || item.entity)).map(item =>\n      (typeof item === 'string' ? item : item.entity));\n  }\n}\n\ncustomElements.define('hui-entities-card', HuiEntitiesCard);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport createCardElement from '../common/create-card-element.js';\nimport processConfigEntities from '../common/process-config-entities.js';\n\nfunction getEntities(hass, filterState, entities) {\n  return entities.filter((entityConf) => {\n    const stateObj = hass.states[entityConf.entity];\n    return stateObj && filterState.includes(stateObj.state);\n  });\n}\n\nclass HuiEntitiesCard extends PolymerElement {\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  getCardSize() {\n    return this.lastChild ? this.lastChild.getCardSize() : 1;\n  }\n\n  setConfig(config) {\n    if (!config.state_filter || !Array.isArray(config.state_filter)) {\n      throw new Error('Incorrect filter config.');\n    }\n\n    this._config = config;\n    this._configEntities = processConfigEntities(config.entities);\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n      this._element = null;\n    }\n\n    const card = 'card' in config ? Object.assign({}, config.card) : {};\n    if (!card.type) card.type = 'entities';\n    card.entities = [];\n\n    const element = createCardElement(card);\n    element._filterRawConfig = card;\n    this._updateCardConfig(element);\n\n    this._element = element;\n  }\n\n  _hassChanged() {\n    this._updateCardConfig(this._element);\n  }\n\n  _updateCardConfig(element) {\n    if (!element || element.tagName === 'HUI-ERROR-CARD' || !this.hass) return;\n    const entitiesList = getEntities(this.hass, this._config.state_filter, this._configEntities);\n\n    if (entitiesList.length === 0 && this._config.show_empty === false) {\n      this.style.display = 'none';\n      return;\n    }\n\n    this.style.display = 'block';\n    element.setConfig(Object.assign(\n      {},\n      element._filterRawConfig,\n      { entities: entitiesList }\n    ));\n    element.isPanel = this.isPanel;\n    element.hass = this.hass;\n\n    // Attach element if it has never been attached.\n    if (!this.lastChild) this.appendChild(element);\n  }\n}\ncustomElements.define('hui-entity-filter-card', HuiEntitiesCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiErrorCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          background-color: red;\n          color: white;\n          padding: 8px;\n        }\n      </style>\n      [[_config.error]]\n      <pre>[[_toStr(_config.origConfig)]]</pre>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n    };\n  }\n\n  setConfig(config) {\n    this._config = config;\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  _toStr(obj) {\n    return JSON.stringify(obj, null, 2);\n  }\n}\n\ncustomElements.define('hui-error-card', HuiErrorCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport processConfigEntities from '../common/process-config-entities';\n\nimport toggleEntity from '../common/entity/toggle-entity.js';\n\nimport '../../../components/entity/state-badge.js';\nimport '../../../components/ha-card.js';\nimport '../../../components/ha-icon.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HuiGlanceCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          padding: 16px;\n        }\n        ha-card[header] {\n          padding-top: 0;\n        }\n        ha-icon {\n          padding: 8px;\n          color: var(--paper-item-icon-color);\n        }\n        .entities {\n          display: flex;\n          margin-bottom: -12px;\n          flex-wrap: wrap;\n        }\n        .entity {\n          box-sizing: border-box;\n          padding: 0 4px;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          cursor: pointer;\n          margin-bottom: 12px;\n          width: var(--glance-column-width, 20%);\n        }\n        .entity div {\n          width: 100%;\n          text-align: center;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        .name {\n          min-height: var(--paper-font-body1_-_line-height, 20px);\n        }\n      </style>\n\n      <ha-card header$=\"[[_config.title]]\">\n        <div class=\"entities\">\n          <template is=\"dom-repeat\" items=\"[[_configEntities]]\">\n            <template is=\"dom-if\" if=\"[[_showEntity(item, hass.states)]]\">\n              <div class=\"entity\" on-click=\"_handleClick\">\n                <template is=\"dom-if\" if=\"[[_showInfo(_config.show_name)]]\">\n                  <div class=\"name\">[[_computeName(item, hass.states)]]</div>\n                </template>\n                <template is=\"dom-if\" if=\"[[!item.icon]]\">\n                  <state-badge state-obj=\"[[_computeStateObj(item, hass.states)]]\"></state-badge>\n                </template>\n                <template is=\"dom-if\" if=\"[[item.icon]]\">\n                  <ha-icon icon=\"[[item.icon]]\"></ha-icon>\n                </template>\n                <template is=\"dom-if\" if=\"[[_showInfo(_config.show_state)]]\">\n                  <div>[[_computeState(item, hass.states)]]</div>\n                </template>\n              </div>\n            </template>\n          </template>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _configEntities: Array,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    this._config = config;\n    this.updateStyles({ '--glance-column-width': (config && config.column_width) || '20%' });\n    this._configEntities = processConfigEntities(config.entities);\n  }\n\n  _showEntity(item, states) {\n    return item.entity in states;\n  }\n\n  _showInfo(info) {\n    return info !== false;\n  }\n\n  _computeName(item, states) {\n    return 'name' in item ? item.name : computeStateName(states[item.entity]);\n  }\n\n  _computeStateObj(item, states) {\n    return states[item.entity];\n  }\n\n  _computeState(item, states) {\n    return computeStateDisplay(this.localize, states[item.entity]);\n  }\n\n  _handleClick(ev) {\n    const config = ev.model.item;\n    const entityId = config.entity;\n    switch (config.tap_action) {\n      case 'toggle':\n        toggleEntity(this.hass, entityId);\n        break;\n      case 'call-service': {\n        const [domain, service] = config.service.split('.', 2);\n        const serviceData = Object.assign(\n          {}, { entity_id: entityId },\n          config.service_data\n        );\n        this.hass.callService(domain, service, serviceData);\n        break;\n      }\n      default:\n        this.fire('hass-more-info', { entityId });\n    }\n  }\n}\n\ncustomElements.define('hui-glance-card', HuiGlanceCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/state-history-charts.js';\nimport '../../../data/ha-state-history-data.js';\n\nimport processConfigEntities from '../common/process-config-entities.js';\n\n\nclass HuiHistoryGraphCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          padding: 16px;\n        }\n        ha-card[header] {\n          padding-top: 0;\n        }\n      </style>\n\n      <ha-card header$='[[_config.title]]'>\n        <ha-state-history-data\n          hass=\"[[hass]]\"\n          filter-type=\"recent-entity\"\n          entity-id=\"[[_entities]]\"\n          data=\"{{_stateHistory}}\"\n          is-loading=\"{{_stateHistoryLoading}}\"\n          cache-config=\"[[_cacheConfig]]\"\n        ></ha-state-history-data>\n        <state-history-charts\n          hass=\"[[hass]]\"\n          history-data=\"[[_stateHistory]]\"\n          is-loading-data=\"[[_stateHistoryLoading]]\"\n          names=\"[[_names]]\"\n          up-to-now\n          no-single\n        ></state-history-charts>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _names: Object,\n      _entities: Array,\n\n      _stateHistory: Object,\n      _stateHistoryLoading: Boolean,\n      _cacheConfig: Object\n    };\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    const entities = processConfigEntities(config.entities);\n\n    this._config = config;\n\n    const _entities = [];\n    const _names = {};\n    for (const entity of entities) {\n      _entities.push(entity.entity);\n      if (entity.name) {\n        _names[entity.entity] = entity.name;\n      }\n    }\n\n    this.setProperties({\n      _cacheConfig: {\n        cacheKey: _entities.sort().join(),\n        hoursToShow: config.hours_to_show || 24,\n        refresh: config.refresh_interval || 0\n      },\n      _entities,\n      _names\n    });\n  }\n}\n\ncustomElements.define('hui-history-graph-card', HuiHistoryGraphCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiHorizontalStackCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          display: flex;\n        }\n        #root > * {\n          flex: 1 1 0;\n          margin: 0 4px;\n        }\n        #root > *:first-child {\n          margin-left: 0;\n        }\n        #root > *:last-child {\n          margin-right: 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    let size = 1;\n    this._elements.forEach((element) => {\n      const elSize = computeCardSize(element);\n      if (elSize > size) size = elSize;\n    });\n    return size;\n  }\n\n  setConfig(config) {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error('Card config incorrect.');\n    }\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    this._elements = [];\n    const root = this.$.root;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const elements = [];\n    config.cards.forEach((card) => {\n      const element = createCardElement(card);\n      element.hass = this.hass;\n      elements.push(element);\n      root.appendChild(element);\n    });\n    this._elements = elements;\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-horizontal-stack-card', HuiHorizontalStackCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiIframeCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          overflow: hidden;\n        }\n        #root {\n          width: 100%;\n          position: relative;\n        }\n        iframe {\n          border: none;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n      </style>\n      <ha-card header=\"[[_config.title]]\">\n        <div id=\"root\">\n          <iframe src=\"[[_config.url]]\"></iframe>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  setConfig(config) {\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n\n    this.$.root.style.paddingTop = config.aspect_ratio || '50%';\n  }\n\n  getCardSize() {\n    return 1 + (this.offsetHeight / 50);\n  }\n}\ncustomElements.define('hui-iframe-card', HuiIframeCard);\n","// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport default function debounce(func, wait, immediate) {\n  let timeout;\n  return function (...args) {\n    const context = this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport Leaflet from 'leaflet';\n\nimport '../../map/ha-entity-marker.js';\n\nimport setupLeafletMap from '../../../common/dom/setup-leaflet-map.js';\nimport processConfigEntities from '../common/process-config-entities.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport debounce from '../../../common/util/debounce.js';\n\nLeaflet.Icon.Default.imagePath = '/static/images/leaflet';\n\nclass HuiMapCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host([is-panel]) ha-card {\n          left: 0;\n          top: 0;\n          width: 100%;\n          /**\n           * In panel mode we want a full height map. Since parent #view\n           * only sets min-height, we need absolute positioning here\n           */\n          height: 100%;\n          position: absolute;\n        }\n\n        ha-card {\n          overflow: hidden;\n        }\n\n        #map {\n          z-index: 0;\n          border: none;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        paper-icon-button {\n          position: absolute;\n          top: 75px;\n          left: 7px;\n        }\n\n        #root {\n          position: relative;\n        }\n\n        :host([is-panel]) #root {\n          height: 100%;\n        }\n      </style>\n\n      <ha-card id=\"card\" header=\"[[_config.title]]\">\n        <div id=\"root\">\n          <div id=\"map\"></div>\n          <paper-icon-button\n            on-click=\"_fitMap\"\n            icon=\"hass:image-filter-center-focus\"\n            title=\"Reset focus\"\n          ></paper-icon-button>\n        </div>\n      </ha-card>\n\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_drawEntities'\n      },\n      _config: Object,\n      isPanel: {\n        type: Boolean,\n        reflectToAttribute: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this._debouncedResizeListener = debounce(this._resetMap.bind(this), 100);\n  }\n\n  ready() {\n    super.ready();\n\n    if (!this._config || this.isPanel) {\n      return;\n    }\n\n    this.$.root.style.paddingTop = this._config.aspect_ratio || '100%';\n  }\n\n  setConfig(config) {\n    if (!config) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._configEntities = processConfigEntities(config.entities);\n    this._config = config;\n  }\n\n  getCardSize() {\n    let ar = this._config.aspect_ratio || '100%';\n    ar = ar.substr(0, ar.length - 1);\n    return 1 + Math.floor(ar / 25) || 3;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // Observe changes to map size and invalidate to prevent broken rendering\n    // Uses ResizeObserver in Chrome, otherwise window resize event\n    if (typeof ResizeObserver === 'function') {\n      this._resizeObserver = new ResizeObserver(() => this._debouncedResizeListener());\n      this._resizeObserver.observe(this.$.map);\n    } else {\n      window.addEventListener('resize', this._debouncedResizeListener);\n    }\n\n    this._map = setupLeafletMap(this.$.map);\n    this._drawEntities(this.hass);\n\n    setTimeout(() => {\n      this._resetMap();\n      this._fitMap();\n    }, 1);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._map) {\n      this._map.remove();\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this.$.map);\n    } else {\n      window.removeEventListener('resize', this._debouncedResizeListener);\n    }\n  }\n\n  _resetMap() {\n    if (!this._map) {\n      return;\n    }\n    this._map.invalidateSize();\n  }\n\n  _fitMap() {\n    if (this._mapItems.length === 0) {\n      this._map.setView(\n        new Leaflet.LatLng(this.hass.config.core.latitude, this.hass.config.core.longitude),\n        14\n      );\n    } else {\n      const bounds = new Leaflet.latLngBounds(this._mapItems.map(item => item.getLatLng()));\n      this._map.fitBounds(bounds.pad(0.5));\n    }\n  }\n\n  _drawEntities(hass) {\n    const map = this._map;\n    if (!map) {\n      return;\n    }\n\n    if (this._mapItems) {\n      this._mapItems.forEach(marker => marker.remove());\n    }\n    const mapItems = this._mapItems = [];\n\n    this._configEntities.forEach((entity) => {\n      const entityId = entity.entity;\n      if (!(entityId in hass.states)) {\n        return;\n      }\n      const stateObj = hass.states[entityId];\n      const title = computeStateName(stateObj);\n      const { latitude, longitude, passive, icon, radius,\n        entity_picture: entityPicture, gps_accuracy: gpsAccuracy } = stateObj.attributes;\n\n      if (!(latitude && longitude)) {\n        return;\n      }\n\n      let markerIcon;\n      let iconHTML;\n      let el;\n\n      if (computeStateDomain(stateObj) === 'zone') {\n        // DRAW ZONE\n        if (passive) return;\n\n        // create icon\n        if (icon) {\n          el = document.createElement('ha-icon');\n          el.setAttribute('icon', icon);\n          iconHTML = el.outerHTML;\n        } else {\n          iconHTML = title;\n        }\n\n        markerIcon = Leaflet.divIcon({\n          html: iconHTML,\n          iconSize: [24, 24],\n          className: '',\n        });\n\n        // create market with the icon\n        mapItems.push(Leaflet.marker([latitude, longitude], {\n          icon: markerIcon,\n          interactive: false,\n          title: title,\n        }).addTo(map));\n\n        // create circle around it\n        mapItems.push(Leaflet.circle([latitude, longitude], {\n          interactive: false,\n          color: '#FF9800',\n          radius: radius,\n        }).addTo(map));\n\n        return;\n      }\n\n      // DRAW ENTITY\n      // create icon\n      const entityName = title.split(' ').map(part => part[0]).join('').substr(0, 3);\n\n      el = document.createElement('ha-entity-marker');\n      el.setAttribute('entity-id', entityId);\n      el.setAttribute('entity-name', entityName);\n      el.setAttribute('entity-picture', entityPicture || '');\n\n      /* Leaflet clones this element before adding it to the map. This messes up\n         our Polymer object and we can't pass data through. Thus we hack like this. */\n      markerIcon = Leaflet.divIcon({\n        html: el.outerHTML,\n        iconSize: [48, 48],\n        className: '',\n      });\n\n      // create market with the icon\n      mapItems.push(Leaflet.marker([latitude, longitude], {\n        icon: markerIcon,\n        title: computeStateName(stateObj),\n      }).addTo(map));\n\n      // create circle around if entity has accuracy\n      if (gpsAccuracy) {\n        mapItems.push(Leaflet.circle([latitude, longitude], {\n          interactive: false,\n          color: '#0288D1',\n          radius: gpsAccuracy,\n        }).addTo(map));\n      }\n    });\n  }\n}\n\ncustomElements.define('hui-map-card', HuiMapCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/ha-markdown.js';\n\nclass HuiMarkdownCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          @apply --paper-font-body1;\n        }\n        ha-markdown {\n          display: block;\n          padding: 0 16px 16px;\n          -ms-user-select: initial;\n          -webkit-user-select: initial;\n          -moz-user-select: initial;\n        }\n        :host([no-title]) ha-markdown {\n          padding-top: 16px;\n        }\n        ha-markdown > *:first-child {\n          margin-top: 0;\n        }\n        ha-markdown > *:last-child {\n          margin-bottom: 0;\n        }\n        ha-markdown a {\n          color: var(--primary-color);\n        }\n        ha-markdown img {\n          max-width: 100%;\n        }\n      </style>\n      <ha-card header=\"[[_config.title]]\">\n        <ha-markdown content='[[_config.content]]'></ha-markdown>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n      noTitle: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: '_computeNoTitle(_config.title)',\n      },\n    };\n  }\n\n  setConfig(config) {\n    this._config = config;\n  }\n\n  getCardSize() {\n    return this._config.content.split('\\n').length;\n  }\n\n  _computeNoTitle(title) {\n    return !title;\n  }\n}\n\ncustomElements.define('hui-markdown-card', HuiMarkdownCard);\n","import createErrorCardConfig from '../common/create-error-card-config.js';\nimport computeDomain from '../../../common/entity/compute_domain.js';\n\n\nexport default class LegacyWrapperCard extends HTMLElement {\n  constructor(tag, domain) {\n    super();\n    this._tag = tag.toUpperCase();\n    this._domain = domain;\n    this._element = null;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error('No entity specified');\n    }\n\n    if (computeDomain(config.entity) !== this._domain) {\n      throw new Error(`Specified entity needs to be of domain ${this._domain}.`);\n    }\n\n    this._config = config;\n  }\n\n  set hass(hass) {\n    const entityId = this._config.entity;\n\n    if (entityId in hass.states) {\n      this._ensureElement(this._tag);\n      this.lastChild.hass = hass;\n      this.lastChild.stateObj = hass.states[entityId];\n    } else {\n      this._ensureElement('HUI-ERROR-CARD');\n      this.lastChild.setConfig(createErrorCardConfig(`No state available for ${entityId}`, this._config));\n    }\n  }\n\n  _ensureElement(tag) {\n    if (this.lastChild && this.lastChild.tagName === tag) return;\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this.appendChild(document.createElement(tag));\n  }\n}\n","import '../../../cards/ha-media_player-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiMediaControlCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-media_player-card', 'media_player');\n  }\n}\n\ncustomElements.define('hui-media-control-card', HuiMediaControlCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HuiPictureCard extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          overflow: hidden;\n        }\n        ha-card[clickable] {\n          cursor: pointer;\n        }\n        img {\n          display: block;\n          width: 100%;\n        }\n      </style>\n\n      <ha-card on-click=\"_cardClicked\" clickable$='[[_computeClickable(_config)]]'>\n        <img src='[[_config.image]]' />\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.image) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._config = config;\n  }\n\n  _computeClickable(config) {\n    return config.navigation_path || config.service;\n  }\n\n  _cardClicked() {\n    if (this._config.navigation_path) {\n      this.navigate(this._config.navigation_path);\n    }\n    if (this._config.service) {\n      const [domain, service] = this._config.service.split('.', 2);\n      this.hass.callService(domain, service, this._config.service_data);\n    }\n  }\n}\n\ncustomElements.define('hui-picture-card', HuiPictureCard);\n","import { dedupingMixin } from '@polymer/polymer/lib/utils/mixin.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport computeStateName from '../../../common/entity/compute_state_name';\n\n/*\n * @polymerMixin\n * @appliesMixin EventsMixin\n * @appliesMixin NavigateMixin\n */\nexport default dedupingMixin(superClass =>\n  class extends NavigateMixin(EventsMixin(superClass)) {\n    handleClick(hass, config) {\n      const tapAction = config.tap_action || 'more-info';\n      if (tapAction === 'none') return;\n\n      switch (tapAction) {\n        case 'more-info':\n          this.fire('hass-more-info', { entityId: config.entity });\n          break;\n        case 'navigate':\n          this.navigate(config.navigation_path);\n          break;\n        case 'toggle':\n          toggleEntity(hass, config.entity);\n          break;\n        case 'call-service': {\n          const [domain, service] = config.service.split('.', 2);\n          const serviceData = Object.assign(\n            {}, { entity_id: config.entity },\n            config.service_data\n          );\n          hass.callService(domain, service, serviceData);\n        }\n      }\n    }\n\n    computeTooltip(hass, config) {\n      if (config.title) return config.title;\n\n      const stateName = (config.entity in hass.states) ?\n        computeStateName(hass.states[config.entity]) : config.entity;\n\n      let tooltip;\n      switch (config.tap_action) {\n        case 'navigate':\n          tooltip = `Navigate to ${config.navigation_path}`;\n          break;\n        case 'toggle':\n          tooltip = `Toggle ${stateName}`;\n          break;\n        case 'call-service':\n          tooltip = `Call service ${config.service}`;\n          break;\n        default:\n          tooltip = `Show more-info: ${stateName}`;\n      }\n\n      return tooltip;\n    }\n  });\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-icon.js';\n\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n */\nclass HuiIconElement extends ElementClickMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer; \n        } \n      </style>\n      <ha-icon \n        icon=\"[[_config.icon]]\"\n        title$=\"[[computeTooltip(hass, _config)]]\"\n      ></ha-icon> \n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config || !config.icon) {\n      throw Error('Error in element configuration');\n    }\n\n    this._config = config;\n  }\n}\ncustomElements.define('hui-icon-element', HuiIconElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-toggle-button/paper-toggle-button.js';\n\nimport { STATES_OFF } from '../../../common/const.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nconst UPDATE_INTERVAL = 10000;\nconst DEFAULT_FILTER = 'grayscale(100%)';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiImage extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        img {\n          display: block;\n          height: auto;\n          transition: filter .2s linear;\n          width: 100%;\n        }\n\n        .error {\n          text-align: center;\n        }\n\n        .hidden {\n          display: none;\n        }\n\n        #brokenImage {\n          background: grey url('/static/images/image-broken.svg') center/36px no-repeat;\n        }\n\n      </style>\n\n      <img\n        id=\"image\"\n        src=\"[[_imageSrc]]\"\n        on-error=\"_onImageError\"\n        on-load=\"_onImageLoad\" />\n      <div id=\"brokenImage\"></div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      entity: String,\n      image: String,\n      stateImage: Object,\n      cameraImage: String,\n      filter: String,\n      stateFilter: Object,\n      _imageSrc: String\n    };\n  }\n\n  static get observers() {\n    return ['_configChanged(image, stateImage, cameraImage)'];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.cameraImage) {\n      this.timer = setInterval(() => this._updateCameraImageSrc(), UPDATE_INTERVAL);\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    clearInterval(this.timer);\n  }\n\n  _configChanged(image, stateImage, cameraImage) {\n    if (cameraImage) {\n      this._updateCameraImageSrc();\n    } else if (image && !stateImage) {\n      this._imageSrc = image;\n    }\n  }\n\n  _onImageError() {\n    this._imageSrc = null;\n    this.$.image.classList.add('hidden');\n    this.$.brokenImage.style.setProperty('height', `${this._lastImageHeight || '100'}px`);\n    this.$.brokenImage.classList.remove('hidden');\n  }\n\n  _onImageLoad() {\n    this.$.image.classList.remove('hidden');\n    this.$.brokenImage.classList.add('hidden');\n    this._lastImageHeight = this.$.image.offsetHeight;\n  }\n\n  _hassChanged(hass) {\n    if (this.cameraImage || !this.entity) {\n      return;\n    }\n\n    const stateObj = hass.states[this.entity];\n    const newState = !stateObj ? 'unavailable' : stateObj.state;\n\n    if (newState === this._currentState) return;\n    this._currentState = newState;\n\n    this._updateStateImage();\n    this._updateStateFilter(stateObj);\n  }\n\n  _updateStateImage() {\n    if (!this.stateImage) {\n      this._imageFallback = true;\n      return;\n    }\n    const stateImg = this.stateImage[this._currentState];\n    this._imageSrc = stateImg || this.image;\n    this._imageFallback = !stateImg;\n  }\n\n  _updateStateFilter(stateObj) {\n    let filter;\n    if (!this.stateFilter) {\n      filter = this.filter;\n    } else {\n      filter = this.stateFilter[this._currentState] || this.filter;\n    }\n\n    const isOff = !stateObj || STATES_OFF.includes(stateObj.state);\n    this.$.image.style.filter = filter || (isOff && this._imageFallback && DEFAULT_FILTER) || '';\n  }\n\n  async _updateCameraImageSrc() {\n    try {\n      const { content_type: contentType, content } = await this.hass.callWS({\n        type: 'camera_thumbnail',\n        entity_id: this.cameraImage,\n      });\n      this._imageSrc = `data:${contentType};base64, ${content}`;\n      this._onImageLoad();\n    } catch (err) {\n      this._onImageError();\n    }\n  }\n}\n\ncustomElements.define('hui-image', HuiImage);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-image.js';\n\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n */\nclass HuiImageElement extends ElementClickMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host(.clickable) {\n          cursor: pointer; \n        } \n        hui-image {\n          overflow-y: hidden;\n        } \n      </style>\n      <hui-image\n        hass=\"[[hass]]\"\n        entity=\"[[_config.entity]]\"\n        image=\"[[_config.image]]\"\n        state-image=\"[[_config.state_image]]\"\n        camera-image=\"[[_config.camera_image]]\"\n        filter=\"[[_config.filter]]\"\n        state-filter=\"[[_config.state_filter]]\"\n        title$=\"[[computeTooltip(hass, _config)]]\"\n      ></hui-image>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config) {\n      throw Error('Error in element configuration');\n    }\n\n    this.classList.toggle('clickable', config.tap_action !== 'none');\n    this._config = config;\n  }\n}\ncustomElements.define('hui-image-element', HuiImageElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nclass HuiServiceButtonElement extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-call-service-button {\n          color: var(--primary-color);\n          white-space: nowrap;\n        }\n      </style>\n      <ha-call-service-button\n        hass=\"[[hass]]\"\n        domain=\"[[_domain]]\"\n        service=\"[[_service]]\"\n        service-data=\"[[_config.service_data]]\"\n      >[[_config.title]]</ha-call-service-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _domain: String,\n      _service: String\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.service) {\n      throw Error('Error in element configuration');\n    }\n\n    const [domain, service] = config.service.split('.', 2);\n    this.setProperties({\n      _config: config,\n      _domain: domain,\n      _service: service\n    });\n  }\n}\ncustomElements.define('hui-service-button-element', HuiServiceButtonElement);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '../../../components/entity/ha-state-label-badge.js';\nimport computeStateName from '../../../common/entity/compute_state_name';\n\nclass HuiStateBadgeElement extends PolymerElement {\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateBadge(hass, _config)'\n    ];\n  }\n\n  _updateBadge(hass, config) {\n    if (!hass || !config || !(config.entity in hass.states)) return;\n\n    if (!this._badge) {\n      this._badge = document.createElement('ha-state-label-badge');\n    }\n\n    const stateObj = hass.states[config.entity];\n    this._badge.state = stateObj;\n    this._badge.setAttribute('title', computeStateName(stateObj));\n\n    if (!this.lastChild) {\n      this.appendChild(this._badge);\n    }\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw Error('Error in element configuration');\n    }\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this._badge = null;\n    this._config = config;\n  }\n}\ncustomElements.define('hui-state-badge-element', HuiStateBadgeElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/entity/state-badge.js';\n\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n */\nclass HuiStateIconElement extends ElementClickMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer; \n        } \n      </style>\n      <state-badge \n        state-obj=\"[[_stateObj]]\"\n        title$=\"[[computeTooltip(hass, _config)]]\"\n      ></state-badge> \n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n      _stateObj: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw Error('Error in element configuration');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    this._stateObj = hass.states[this._config.entity];\n  }\n}\ncustomElements.define('hui-state-icon-element', HuiStateIconElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\n\nimport '../../../components/entity/ha-state-label-badge.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n * @appliesMixin LocalizeMixin\n */\nclass HuiStateLabelElement extends LocalizeMixin(ElementClickMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer;\n        }\n        .state-label {\n          padding: 8px;\n          white-space: nowrap;\n        }\n      </style>\n      <div class=\"state-label\" title$=\"[[computeTooltip(hass, _config)]]\">\n        [[_config.prefix]][[_computeStateDisplay(_stateObj)]][[_config.suffix]]\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n      _stateObj: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw Error('Error in element configuration');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    this._stateObj = hass.states[this._config.entity];\n  }\n\n  _computeStateDisplay(stateObj) {\n    return stateObj ? computeStateDisplay(this.localize, stateObj) : '-';\n  }\n}\ncustomElements.define('hui-state-label-element', HuiStateLabelElement);\n","import '../elements/hui-icon-element.js';\nimport '../elements/hui-image-element.js';\nimport '../elements/hui-service-button-element.js';\nimport '../elements/hui-state-badge-element.js';\nimport '../elements/hui-state-icon-element.js';\nimport '../elements/hui-state-label-element.js';\n\nimport fireEvent from '../../../common/dom/fire_event.js';\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\nconst ELEMENT_TYPES = new Set([\n  'icon',\n  'image',\n  'service-button',\n  'state-badge',\n  'state-icon',\n  'state-label',\n]);\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createHuiElement(config) {\n  if (!config || typeof config !== 'object' || !config.type) {\n    return _createErrorElement('No element type configured.', config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  if (!ELEMENT_TYPES.has(config.type)) {\n    return _createErrorElement(`Unknown element type encountered: ${config.type}.`, config);\n  }\n\n  return _createElement(`hui-${config.type}-element`, config);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport createHuiElement from '../common/create-hui-element.js';\n\nclass HuiPictureElementsCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      ha-card {\n        overflow: hidden;\n      }\n      #root {\n        position: relative;\n        overflow: hidden;\n      }\n      #root img {\n        display: block;\n        width: 100%;\n      }\n      .element {\n        position: absolute;\n        transform: translate(-50%, -50%);\n      }\n      hui-image-element {\n        overflow-y: hidden;\n      }\n    </style>\n\n    <ha-card header=\"[[_config.title]]\">\n      <div id=\"root\"></div>\n    </ha-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    if (!config || !config.image || !Array.isArray(config.elements)) {\n      throw new Error('Invalid card configuration');\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    const root = this.$.root;\n    this._elements = [];\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const img = document.createElement('img');\n    img.src = config.image;\n    root.appendChild(img);\n\n    config.elements.forEach((element) => {\n      const el = createHuiElement(element);\n      el.hass = this.hass;\n      this._elements.push(el);\n\n      el.classList.add('element');\n      Object.keys(element.style).forEach((prop) => {\n        el.style.setProperty(prop, element.style[prop]);\n      });\n      root.appendChild(el);\n    });\n\n    if (this.hass) {\n      this._hassChanged(this.hass);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-picture-elements-card', HuiPictureElementsCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-image.js';\n\nimport computeDomain from '../../../common/entity/compute_domain.js';\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nconst UNAVAILABLE = 'Unavailable';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HuiPictureEntityCard extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          min-height: 75px;\n          overflow: hidden;\n          position: relative;\n        }\n        ha-card.canInteract {\n          cursor: pointer;\n        }\n        .footer {\n          @apply --paper-font-common-nowrap;\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n          padding: 16px;\n          font-size: 16px;\n          line-height: 16px;\n          color: white;\n        }\n        .both {\n          display: flex;\n          justify-content: space-between;\n        }\n        .state {\n          text-align: right;\n        }\n      </style>\n\n      <ha-card id='card' on-click=\"_cardClicked\">\n        <hui-image\n          hass=\"[[hass]]\"\n          image=\"[[_config.image]]\"\n          state-image=\"[[_config.state_image]]\"\n          camera-image=\"[[_getCameraImage(_config)]]\"\n          entity=\"[[_config.entity]]\"\n        ></hui-image>\n        <template is=\"dom-if\" if=\"[[_showNameAndState(_config)]]\">\n          <div class=\"footer both\">\n            <div>[[_name]]</div>\n            <div>[[_state]]</div>\n        </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[_showName(_config)]]\">\n          <div class=\"footer\">\n            [[_name]]\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[_showState(_config)]]\">\n          <div class=\"footer state\">\n            [[_state]]\n          </div>\n        </template>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n      _name: String,\n      _state: String\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._entityDomain = computeDomain(config.entity);\n    if (this._entityDomain !== 'camera' &&\n        (!config.image && !config.state_image && !config.camera_image)) {\n      throw new Error('No image source configured.');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    const config = this._config;\n    const entityId = config.entity;\n    const stateObj = hass.states[entityId];\n\n    // Nothing changed\n    if ((!stateObj && this._oldState === UNAVAILABLE) ||\n        (stateObj && stateObj.state === this._oldState)) {\n      return;\n    }\n\n    let name;\n    let state;\n    let stateLabel;\n    let available;\n\n    if (stateObj) {\n      name = config.name || computeStateName(stateObj);\n      state = stateObj.state;\n      stateLabel = computeStateDisplay(this.localize, stateObj);\n      available = true;\n    } else {\n      name = config.name || entityId;\n      state = UNAVAILABLE;\n      stateLabel = this.localize('state.default.unavailable');\n      available = false;\n    }\n\n    this.setProperties({\n      _name: name,\n      _state: stateLabel,\n      _oldState: state\n    });\n\n    this.$.card.classList.toggle('canInteract', available);\n  }\n\n  _showNameAndState(config) {\n    return config.show_name !== false && config.show_state !== false;\n  }\n\n  _showName(config) {\n    return config.show_name !== false && config.show_state === false;\n  }\n\n  _showState(config) {\n    return config.show_name === false && config.show_state !== false;\n  }\n\n  _cardClicked() {\n    const config = this._config;\n    const entityId = config.entity;\n\n    if (!(entityId in this.hass.states)) return;\n\n    if (config.tap_action === 'toggle') {\n      toggleEntity(this.hass, entityId);\n    } else {\n      this.fire('hass-more-info', { entityId });\n    }\n  }\n\n  _getCameraImage(config) {\n    return this._entityDomain === 'camera' ? config.entity : config.camera_image;\n  }\n}\n\ncustomElements.define('hui-picture-entity-card', HuiPictureEntityCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/ha-icon.js';\nimport '../components/hui-image.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport { DOMAINS_TOGGLE } from '../../../common/const.js';\nimport stateIcon from '../../../common/entity/state_icon.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\nimport processConfigEntities from '../common/process-config-entities';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport computeDomain from '../../../common/entity/compute_domain';\n\nconst STATES_OFF = new Set([\n  'closed',\n  'locked',\n  'not_home',\n  'off'\n]);\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HuiPictureGlanceCard extends NavigateMixin(LocalizeMixin(EventsMixin(PolymerElement))) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          position: relative;\n          min-height: 48px;\n          overflow: hidden;\n        }\n        hui-image.clickable {\n          cursor: pointer;\n        }\n        .box {\n          @apply --paper-font-common-nowrap;\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n          padding: 4px 8px;\n          font-size: 16px;\n          line-height: 40px;\n          color: white;\n          display: flex;\n          justify-content: space-between;\n        }\n        .box .title {\n          font-weight: 500;\n          margin-left: 8px;\n        }\n        ha-icon {\n          cursor: pointer;\n          padding: 8px;\n          color: #A9A9A9;\n        }\n        ha-icon.state-on {\n          color: white;\n        }\n      </style>\n\n      <ha-card>\n        <hui-image\n          class$='[[_computeImageClass(_config)]]'\n          on-click='_handleImageClick'\n          hass=\"[[hass]]\"\n          image=\"[[_config.image]]\"\n          state-image=\"[[_config.state_image]]\"\n          camera-image=\"[[_config.camera_image]]\"\n          entity=\"[[_config.entity]]\"\n        ></hui-image>\n        <div class=\"box\">\n          <template is=\"dom-if\" if=\"[[_config.title]]\">\n            <div class=\"title\">[[_config.title]]</div>\n          </template>\n          <div>\n            <template is=\"dom-repeat\" items=\"[[_computeVisible(_entitiesDialog, hass.states)]]\">\n              <ha-icon\n                on-click=\"_openDialog\"\n                class$=\"[[_computeButtonClass(item.entity, hass.states)]]\"\n                icon=\"[[_computeIcon(item, hass.states)]]\"\n                title=\"[[_computeTooltip(item.entity, hass.states)]]\"\n              ></ha-icon>\n            </template>\n          </div>\n          <div>\n            <template is=\"dom-repeat\" items=\"[[_computeVisible(_entitiesToggle, hass.states)]]\">\n              <ha-icon\n                on-click=\"_callService\"\n                class$=\"[[_computeButtonClass(item.entity, hass.states)]]\"\n                icon=\"[[_computeIcon(item, hass.states)]]\"\n                title=\"[[_computeTooltip(item.entity, hass.states)]]\"\n              ></ha-icon>\n            </template>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _entitiesDialog: Array,\n      _entitiesToggle: Array,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entities || !Array.isArray(config.entities) ||\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)) {\n      throw new Error('Invalid card configuration');\n    }\n    const entities = processConfigEntities(config.entities);\n    const dialog = [];\n    const toggle = [];\n\n    entities.forEach((item) => {\n      if (config.force_dialog || !DOMAINS_TOGGLE.has(computeDomain(item.entity))) {\n        dialog.push(item);\n      } else {\n        toggle.push(item);\n      }\n    });\n    this.setProperties({\n      _config: config,\n      _entitiesDialog: dialog,\n      _entitiesToggle: toggle\n    });\n  }\n\n  _computeVisible(collection, states) {\n    return collection.filter(el => el.entity in states);\n  }\n\n  _computeIcon(item, states) {\n    return item.icon || stateIcon(states[item.entity]);\n  }\n\n  _computeButtonClass(entityId, states) {\n    return STATES_OFF.has(states[entityId].state) ? '' : 'state-on';\n  }\n\n  _computeTooltip(entityId, states) {\n    return `${computeStateName(states[entityId])}: ${computeStateDisplay(this.localize, states[entityId])}`;\n  }\n\n  _computeImageClass(config) {\n    return config.navigation_path || config.camera_image ? 'clickable' : '';\n  }\n\n  _openDialog(ev) {\n    this.fire('hass-more-info', { entityId: ev.model.item.entity });\n  }\n\n  _callService(ev) {\n    toggleEntity(this.hass, ev.model.item.entity);\n  }\n\n  _handleImageClick() {\n    if (this._config.navigation_path) {\n      this.navigate(this._config.navigation_path);\n      return;\n    }\n\n    if (this._config.camera_image) {\n      this.fire('hass-more-info', { entityId: this._config.camera_image });\n    }\n  }\n}\ncustomElements.define('hui-picture-glance-card', HuiPictureGlanceCard);\n","import '../../../cards/ha-plant-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiPlantStatusCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-plant-card', 'plant');\n  }\n}\n\ncustomElements.define('hui-plant-status-card', HuiPlantStatusCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiVerticalStackCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          display: flex;\n          flex-direction: column;\n        }\n        #root > * {\n          margin: 4px 0 8px 0;\n        }\n        #root > *:first-child {\n          margin-top: 0;\n        }\n        #root > *:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    let totalSize = 0;\n    this._elements.forEach((element) => {\n      totalSize += computeCardSize(element);\n    });\n    return totalSize;\n  }\n\n  setConfig(config) {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error('Card config incorrect');\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n\n    this._elements = [];\n    const root = this.$.root;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const elements = [];\n    config.cards.forEach((card) => {\n      const element = createCardElement(card);\n      element.hass = this.hass;\n      elements.push(element);\n      root.appendChild(element);\n    });\n    this._elements = elements;\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-vertical-stack-card', HuiVerticalStackCard);\n","import '../../../cards/ha-camera-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiWeatherForecastCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-weather-card', 'weather');\n  }\n\n  getCardSize() {\n    return 4;\n  }\n}\n\ncustomElements.define('hui-weather-forecast-card', HuiWeatherForecastCard);\n","import fireEvent from '../../../common/dom/fire_event.js';\n\nimport '../cards/hui-conditional-card.js';\nimport '../cards/hui-entities-card.js';\nimport '../cards/hui-entity-filter-card.js';\nimport '../cards/hui-error-card.js';\nimport '../cards/hui-glance-card';\nimport '../cards/hui-history-graph-card.js';\nimport '../cards/hui-horizontal-stack-card.js';\nimport '../cards/hui-iframe-card.js';\nimport '../cards/hui-map-card.js';\nimport '../cards/hui-markdown-card.js';\nimport '../cards/hui-media-control-card.js';\nimport '../cards/hui-picture-card.js';\nimport '../cards/hui-picture-elements-card';\nimport '../cards/hui-picture-entity-card';\nimport '../cards/hui-picture-glance-card';\nimport '../cards/hui-plant-status-card.js';\nimport '../cards/hui-vertical-stack-card.js';\nimport '../cards/hui-weather-forecast-card';\n\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CARD_TYPES = new Set([\n  'conditional',\n  'entities',\n  'entity-filter',\n  'error',\n  'glance',\n  'history-graph',\n  'horizontal-stack',\n  'iframe',\n  'map',\n  'markdown',\n  'media-control',\n  'picture',\n  'picture-elements',\n  'picture-entity',\n  'picture-glance',\n  'plant-status',\n  'vertical-stack',\n  'weather-forecast'\n]);\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createCardElement(config) {\n  let tag;\n\n  if (!config || typeof config !== 'object' || !config.type) {\n    return _createErrorElement('No card type configured.', config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  if (!CARD_TYPES.has(config.type)) {\n    return _createErrorElement(`Unknown card type encountered: ${config.type}.`, config);\n  }\n\n  return _createElement(`hui-${config.type}-card`, config);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeUnusedEntities from './common/compute-unused-entities.js';\nimport createCardElement from './common/create-card-element.js';\n\nimport './cards/hui-entities-card.js';\n\nclass HuiUnusedEntities extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          max-width: 600px;\n          margin: 0 auto;\n          padding: 8px 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      config: {\n        type: Object,\n        observer: '_configChanged'\n      },\n    };\n  }\n\n  _configChanged(config) {\n    const root = this.$.root;\n    if (root.lastChild) root.removeChild(root.lastChild);\n\n    const entities = computeUnusedEntities(this.hass, config).map(entity =>\n      ({ entity, secondary_info: 'entity-id' }));\n    const cardConfig = {\n      type: 'entities',\n      title: 'Unused entities',\n      entities,\n      show_header_toggle: false\n    };\n    const element = createCardElement(cardConfig);\n    element.hass = this.hass;\n    root.appendChild(element);\n  }\n\n  _hassChanged(hass) {\n    const root = this.$.root;\n    if (!root.lastChild) return;\n    root.lastChild.hass = hass;\n  }\n}\ncustomElements.define('hui-unused-entities', HuiUnusedEntities);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../components/entity/ha-state-label-badge.js';\n\nimport applyThemesOnElement from '../../common/dom/apply_themes_on_element.js';\n\nimport createCardElement from './common/create-card-element';\n\nclass HUIView extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n      :host {\n        display: block;\n        padding: 4px 4px 0;\n        transform: translateZ(0);\n        position: relative;\n      }\n\n      #badges {\n        margin: 8px 16px;\n        font-size: 85%;\n        text-align: center;\n      }\n\n      #columns {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n      }\n\n      .column {\n        flex-basis: 0;\n        flex-grow: 1;\n        max-width: 500px;\n        overflow-x: hidden;\n      }\n\n      .column > * {\n        display: block;\n        margin: 4px 4px 8px;\n      }\n\n      @media (max-width: 500px) {\n        :host {\n          padding-left: 0;\n          padding-right: 0;\n        }\n\n        .column > * {\n          margin-left: 0;\n          margin-right: 0;\n        }\n      }\n\n      @media (max-width: 599px) {\n        .column {\n          max-width: 600px;\n        }\n      }\n      </style>\n      <div id=\"badges\"></div>\n      <div id=\"columns\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      config: Object,\n      columns: Number\n    };\n  }\n\n  static get observers() {\n    return [\n      // Put all properties in 1 observer so we only call configChanged once\n      '_createBadges(config)',\n      '_createCards(config, columns)'\n    ];\n  }\n\n  constructor() {\n    super();\n    this._cards = [];\n    this._badges = [];\n  }\n\n  _createBadges(config) {\n    const root = this.$.badges;\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.badges || !Array.isArray(config.badges)) {\n      root.style.display = 'none';\n      this._badges = [];\n      return;\n    }\n\n    const elements = [];\n    for (const entityId of config.badges) {\n      if (!(entityId in this.hass.states)) continue;\n\n      const element = document.createElement('ha-state-label-badge');\n      element.state = this.hass.states[entityId];\n      elements.push({ element, entityId });\n      root.appendChild(element);\n    }\n    this._badges = elements;\n    root.style.display = elements.length > 0 ? 'block' : 'none';\n  }\n\n  _createCards(config) {\n    const root = this.$.columns;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      this._cards = [];\n      return;\n    }\n\n    const elements = config.cards.map((cardConfig) => {\n      const element = createCardElement(cardConfig);\n      element.hass = this.hass;\n      return element;\n    });\n\n    let columns = [];\n    const columnEntityCount = [];\n    for (let i = 0; i < this.columns; i++) {\n      columns.push([]);\n      columnEntityCount.push(0);\n    }\n\n    // Find column with < 5 entities, else column with lowest count\n    function getColumnIndex(size) {\n      let minIndex = 0;\n      for (let i = 0; i < columnEntityCount.length; i++) {\n        if (columnEntityCount[i] < 5) {\n          minIndex = i;\n          break;\n        }\n        if (columnEntityCount[i] < columnEntityCount[minIndex]) {\n          minIndex = i;\n        }\n      }\n\n      columnEntityCount[minIndex] += size;\n\n      return minIndex;\n    }\n\n    elements.forEach((el) => {\n      // Trigger custom elements to build up DOM. This is needed for some elements\n      // that use the DOM to decide their height. We don't have to clean this up\n      // because a DOM element can only be in 1 position, so it will be removed from\n      // 'this' and added to the correct column afterwards.\n      this.appendChild(el);\n      const cardSize = typeof el.getCardSize === 'function' ? el.getCardSize() : 1;\n      columns[getColumnIndex(cardSize)].push(el);\n    });\n\n    // Remove empty columns\n    columns = columns.filter(val => val.length > 0);\n\n    columns.forEach((column) => {\n      const columnEl = document.createElement('div');\n      columnEl.classList.add('column');\n      column.forEach(el => columnEl.appendChild(el));\n      root.appendChild(columnEl);\n    });\n\n    this._cards = elements;\n\n    if ('theme' in config) {\n      applyThemesOnElement(root, this.hass.themes, config.theme);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._badges.forEach((badge) => {\n      const { element, entityId } = badge;\n      element.setProperties({\n        hass,\n        state: hass.states[entityId]\n      });\n    });\n    this._cards.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-view', HUIView);\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/app-route/app-route.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-tabs/paper-tab.js';\nimport '@polymer/paper-tabs/paper-tabs.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport scrollToTarget from '../../common/dom/scroll-to-target.js';\n\nimport EventsMixin from '../../mixins/events-mixin.js';\nimport NavigateMixin from '../../mixins/navigate-mixin.js';\n\nimport '../../layouts/ha-app-layout.js';\nimport '../../components/ha-start-voice-button.js';\nimport '../../components/ha-icon.js';\nimport { loadModule, loadCSS, loadJS } from '../../common/dom/load_resource.js';\nimport './hui-unused-entities.js';\nimport './hui-view.js';\nimport debounce from '../../common/util/debounce.js';\n\nimport createCardElement from './common/create-card-element.js';\n\n// CSS and JS should only be imported once. Modules and HTML are safe.\nconst CSS_CACHE = {};\nconst JS_CACHE = {};\n\nclass HUIRoot extends NavigateMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include='ha-style'>\n      :host {\n        -ms-user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n      }\n\n      ha-app-layout {\n        min-height: 100%;\n      }\n      paper-tabs {\n        margin-left: 12px;\n        --paper-tabs-selection-bar-color: var(--text-primary-color, #FFF);\n        text-transform: uppercase;\n      }\n      app-toolbar a {\n        color: var(--text-primary-color, white);\n      }\n      #view {\n        min-height: calc(100vh - 112px);\n        /**\n         * Since we only set min-height, if child nodes need percentage\n         * heights they must use absolute positioning so we need relative\n         * positioning here.\n         *\n         * https://www.w3.org/TR/CSS2/visudet.html#the-height-property\n         */\n        position: relative;\n      }\n      #view.tabs-hidden {\n        min-height: calc(100vh - 64px);\n      }\n      paper-item {\n        cursor: pointer;\n      }\n    </style>\n    <app-route route=\"[[route]]\" pattern=\"/:view\" data=\"{{routeData}}\"></app-route>\n    <ha-app-layout id=\"layout\">\n      <app-header slot=\"header\" fixed>\n        <app-toolbar>\n          <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n          <div main-title>[[_computeTitle(config)]]</div>\n          <ha-start-voice-button hass=\"[[hass]]\"></ha-start-voice-button>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n          >\n            <paper-icon-button icon=\"hass:dots-vertical\" slot=\"dropdown-trigger\"></paper-icon-button>\n            <paper-listbox on-iron-select=\"_deselect\" slot=\"dropdown-content\">\n              <paper-item on-click=\"_handleRefresh\">Refresh</paper-item>\n              <paper-item on-click=\"_handleUnusedEntities\">Unused entities</paper-item>\n              <paper-item on-click=\"_handleHelp\">Help</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </app-toolbar>\n\n        <div sticky hidden$=\"[[_computeTabsHidden(config.views)]]\">\n          <paper-tabs scrollable selected=\"[[_curView]]\" on-iron-activate=\"_handleViewSelected\">\n            <template is=\"dom-repeat\" items=\"[[config.views]]\">\n              <paper-tab>\n                <template is=\"dom-if\" if=\"[[item.icon]]\">\n                  <ha-icon title$=\"[[item.title]]\" icon=\"[[item.icon]]\"></ha-icon>\n                </template>\n                <template is=\"dom-if\" if=\"[[!item.icon]]\">\n                  [[_computeTabTitle(item.title)]]\n                </template>\n              </paper-tab>\n            </template>\n          </paper-tabs>\n        </div>\n      </app-header>\n\n      <div id='view' on-rebuild-view='_debouncedConfigChanged'></div>\n    </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      narrow: Boolean,\n      showMenu: Boolean,\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      config: {\n        type: Object,\n        observer: '_configChanged',\n      },\n      columns: {\n        type: Number,\n        observer: '_columnsChanged',\n      },\n\n      _curView: {\n        type: Number,\n        value: 0,\n      },\n\n      route: {\n        type: Object,\n        observer: '_routeChanged'\n      },\n      routeData: Object\n    };\n  }\n\n  constructor() {\n    super();\n    this._debouncedConfigChanged = debounce(() => this._selectView(this._curView), 100);\n  }\n\n  _routeChanged(route) {\n    const views = this.config && this.config.views;\n    if (route.path === '' && route.prefix === '/lovelace' && views) {\n      this.navigate(`/lovelace/${views[0].id || 0}`, true);\n    } else if (this.routeData.view) {\n      const view = this.routeData.view;\n      let index = 0;\n      for (let i = 0; i < views.length; i++) {\n        if (views[i].id === view || i === parseInt(view)) {\n          index = i;\n          break;\n        }\n      }\n      if (index !== this._curView) this._selectView(index);\n    }\n  }\n\n  _computeViewId(id, index) {\n    return id || index;\n  }\n\n  _computeTitle(config) {\n    return config.title || 'Home Assistant';\n  }\n\n  _computeTabsHidden(views) {\n    return views.length < 2;\n  }\n\n  _computeTabTitle(title) {\n    return title || 'Unnamed view';\n  }\n\n  _handleRefresh() {\n    this.fire('config-refresh');\n  }\n\n  _handleUnusedEntities() {\n    this._selectView('unused');\n  }\n\n  _deselect(ev) {\n    ev.target.selected = null;\n  }\n\n  _handleHelp() {\n    window.open('https://www.home-assistant.io/lovelace/', '_blank');\n  }\n\n  _handleViewSelected(ev) {\n    const index = ev.detail.selected;\n    if (index !== this._curView) {\n      const id = this.config.views[index].id || index;\n      this.navigate(`/lovelace/${id}`);\n    }\n    scrollToTarget(this, this.$.layout.header.scrollTarget);\n  }\n\n  _selectView(viewIndex) {\n    this._curView = viewIndex;\n\n    // Recreate a new element to clear the applied themes.\n    const root = this.$.view;\n    if (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    let view;\n    let background = this.config.background || '';\n\n    if (viewIndex === 'unused') {\n      view = document.createElement('hui-unused-entities');\n      view.config = this.config;\n    } else {\n      const viewConfig = this.config.views[this._curView];\n      if (viewConfig.panel) {\n        view = createCardElement(viewConfig.cards[0]);\n        view.isPanel = true;\n      } else {\n        view = document.createElement('hui-view');\n        view.config = viewConfig;\n        view.columns = this.columns;\n      }\n      if (viewConfig.background) background = viewConfig.background;\n    }\n\n    this.$.view.style.background = background;\n\n    view.hass = this.hass;\n    root.appendChild(view);\n  }\n\n  _hassChanged(hass) {\n    if (!this.$.view.lastChild) return;\n    this.$.view.lastChild.hass = hass;\n  }\n\n  _configChanged(config) {\n    this._loadResources(config.resources || []);\n    // On config change, recreate the view from scratch.\n    this._selectView(this._curView);\n    this.$.view.classList.toggle('tabs-hidden', config.views.length < 2);\n  }\n\n  _columnsChanged(columns) {\n    if (!this.$.view.lastChild) return;\n    this.$.view.lastChild.columns = columns;\n  }\n\n  _loadResources(resources) {\n    resources.forEach((resource) => {\n      switch (resource.type) {\n        case 'css':\n          if (resource.url in CSS_CACHE) break;\n          CSS_CACHE[resource.url] = loadCSS(resource.url);\n          break;\n\n        case 'js':\n          if (resource.url in JS_CACHE) break;\n          JS_CACHE[resource.url] = loadJS(resource.url);\n          break;\n\n        case 'module':\n          loadModule(resource.url);\n          break;\n\n        case 'html':\n          import(/* webpackChunkName: \"import-href-polyfill\" */ '../../resources/html-import/import-href.js')\n            .then(({ importHref }) => importHref(resource.url));\n          break;\n\n        default:\n          // eslint-disable-next-line\n          console.warn('Unknown resource type specified: ${resource.type}');\n      }\n    });\n  }\n}\n\ncustomElements.define('hui-root', HUIRoot);\n","/**\n * Scroll to a specific y coordinate.\n *\n * Copied from paper-scroll-header-panel.\n *\n * @method scroll\n * @param {number} top The coordinate to scroll to, along the y-axis.\n * @param {boolean} smooth true if the scroll position should be smoothly adjusted.\n */\nexport default function scrollToTarget(element, target) {\n  // the scroll event will trigger _updateScrollState directly,\n  // However, _updateScrollState relies on the previous `scrollTop` to update the states.\n  // Calling _updateScrollState will ensure that the states are synced correctly.\n  var top = 0;\n  var scroller = target;\n  var easingFn = function easeOutQuad(t, b, c, d) {\n    /* eslint-disable no-param-reassign, space-infix-ops, no-mixed-operators */\n    t /= d;\n    return -c * t*(t-2) + b;\n    /* eslint-enable no-param-reassign, space-infix-ops, no-mixed-operators */\n  };\n  var animationId = Math.random();\n  var duration = 200;\n  var startTime = Date.now();\n  var currentScrollTop = scroller.scrollTop;\n  var deltaScrollTop = top - currentScrollTop;\n  element._currentAnimationId = animationId;\n  (function updateFrame() {\n    var now = Date.now();\n    var elapsedTime = now - startTime;\n    if (elapsedTime > duration) {\n      scroller.scrollTop = top;\n    } else if (element._currentAnimationId === animationId) {\n      scroller.scrollTop = easingFn(elapsedTime, currentScrollTop, deltaScrollTop, duration);\n      requestAnimationFrame(updateFrame.bind(element));\n    }\n  }).call(element);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../../layouts/hass-loading-screen.js';\nimport '../../layouts/hass-error-screen.js';\nimport './hui-root.js';\n\nclass Lovelace extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n        }\n      </style>\n      <template is='dom-if' if='[[_equal(_state, \"loaded\")]]' restamp>\n        <hui-root\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n          hass='[[hass]]'\n          route=\"[[route]]\"\n          config='[[_config]]'\n          columns='[[_columns]]'\n          on-config-refresh='_fetchConfig'\n        ></hui-root>\n      </template>\n      <template is='dom-if' if='[[_equal(_state, \"loading\")]]' restamp>\n        <hass-loading-screen\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n        ></hass-loading-screen>\n      </template>\n      <template is='dom-if' if='[[_equal(_state, \"error\")]]' restamp>\n        <hass-error-screen\n          title='Lovelace'\n          error='[[_errorMsg]]'\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n        >\n          <paper-button on-click=\"_fetchConfig\">Reload ui-lovelace.yaml</paper-button>\n        </hass-error-screen>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      narrow: {\n        type: Boolean,\n        value: false,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      route: Object,\n\n      _columns: {\n        type: Number,\n        value: 1,\n      },\n\n      _state: {\n        type: String,\n        value: 'loading',\n      },\n\n      _errorMsg: String,\n\n      _config: {\n        type: Object,\n        value: null,\n      },\n    };\n  }\n\n  static get observers() {\n    return ['_updateColumns(narrow, showMenu)'];\n  }\n\n  ready() {\n    this._fetchConfig();\n    this._updateColumns = this._updateColumns.bind(this);\n    this.mqls = [300, 600, 900, 1200].map((width) => {\n      const mql = matchMedia(`(min-width: ${width}px)`);\n      mql.addListener(this._updateColumns);\n      return mql;\n    });\n    this._updateColumns();\n    super.ready();\n  }\n\n  _updateColumns() {\n    const matchColumns = this.mqls.reduce((cols, mql) => cols + mql.matches, 0);\n    // Do -1 column if the menu is docked and open\n    this._columns = Math.max(1, matchColumns - (!this.narrow && this.showMenu));\n  }\n\n  async _fetchConfig() {\n    try {\n      const conf = await this.hass.callWS({ type: 'frontend/lovelace_config' });\n      this.setProperties({\n        _config: conf,\n        _state: 'loaded',\n      });\n    } catch (err) {\n      this.setProperties({\n        _state: 'error',\n        _errorMsg: err.message,\n      });\n    }\n  }\n\n  _equal(a, b) {\n    return a === b;\n  }\n}\n\ncustomElements.define('ha-panel-lovelace', Lovelace);\n","// Load a resource and get a promise when loading done.\n// From: https://davidwalsh.name/javascript-loader\n\nfunction _load(tag, url, type) {\n  // This promise will be used by Promise.all to determine success or failure\n  return new Promise(function (resolve, reject) {\n    const element = document.createElement(tag);\n    let attr = 'src';\n    let parent = 'body';\n\n    // Important success and error for the promise\n    element.onload = () => resolve(url);\n    element.onerror = () => reject(url);\n\n    // Need to set different attributes depending on tag type\n    switch (tag) {\n      case 'script':\n        element.async = true;\n        if (type) {\n          element.type = type;\n        }\n        break;\n      case 'link':\n        element.type = 'text/css';\n        element.rel = 'stylesheet';\n        attr = 'href';\n        parent = 'head';\n    }\n\n    // Inject into document to kick off loading\n    element[attr] = url;\n    document[parent].appendChild(element);\n  });\n}\n\nexport const loadCSS = url => _load('link', url);\nexport const loadJS = url => _load('script', url);\nexport const loadImg = url => _load('img', url);\nexport const loadModule = url => _load('script', url, 'module');\n"],"sourceRoot":""}